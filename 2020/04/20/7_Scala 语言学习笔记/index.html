<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.0" color="#222">









<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="概述Scala 简介: Scala 是一门基于 JVM 的多范式编程语言，通俗的说：Scala 是一种运行在 JVM 上的函数式的面向对象语言，之所以这样命名是因为它的设计目标是：随着用户的需求一起成长。Scala 可被广泛应用于各种编程任务，从编写小型的脚本到构建巨型系统都能胜任。正因如此，Scala 得以提供一些出众的特性，例如：它集成了面向对象编程和面向函数式编程的各种特性，以及更高层的并发">
<meta name="keywords" content="Scala">
<meta property="og:type" content="article">
<meta property="og:title" content="Scala 语言学习笔记">
<meta property="og:url" content="http://yoursite.com/2020/04/20/7_Scala 语言学习笔记/index.html">
<meta property="og:site_name" content="Nowhere">
<meta property="og:description" content="概述Scala 简介: Scala 是一门基于 JVM 的多范式编程语言，通俗的说：Scala 是一种运行在 JVM 上的函数式的面向对象语言，之所以这样命名是因为它的设计目标是：随着用户的需求一起成长。Scala 可被广泛应用于各种编程任务，从编写小型的脚本到构建巨型系统都能胜任。正因如此，Scala 得以提供一些出众的特性，例如：它集成了面向对象编程和面向函数式编程的各种特性，以及更高层的并发">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://img2018.cnblogs.com/blog/906988/201810/906988-20181018233053891-816216903.png">
<meta property="og:updated_time" content="2020-10-31T04:19:34.296Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Scala 语言学习笔记">
<meta name="twitter:description" content="概述Scala 简介: Scala 是一门基于 JVM 的多范式编程语言，通俗的说：Scala 是一种运行在 JVM 上的函数式的面向对象语言，之所以这样命名是因为它的设计目标是：随着用户的需求一起成长。Scala 可被广泛应用于各种编程任务，从编写小型的脚本到构建巨型系统都能胜任。正因如此，Scala 得以提供一些出众的特性，例如：它集成了面向对象编程和面向函数式编程的各种特性，以及更高层的并发">
<meta name="twitter:image" content="http://img2018.cnblogs.com/blog/906988/201810/906988-20181018233053891-816216903.png">





  
  
  <link rel="canonical" href="http://yoursite.com/2020/04/20/7_Scala 语言学习笔记/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Scala 语言学习笔记 | Nowhere</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Nowhere</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/20/7_Scala 语言学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="stone">
      <meta itemprop="description" content="Hungry Fool">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nowhere">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Scala 语言学习笔记

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-04-20 10:12:47" itemprop="dateCreated datePublished" datetime="2020-04-20T10:12:47+08:00">2020-04-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2020-10-31 12:19:34" itemprop="dateModified" datetime="2020-10-31T12:19:34+08:00">2020-10-31</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/面试/" itemprop="url" rel="index"><span itemprop="name">面试</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">Comments: </span>
                <a href="/2020/04/20/7_Scala 语言学习笔记/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/04/20/7_Scala 语言学习笔记/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon">
            <i class="fa fa-eye"></i>
             Views:  
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p><strong>Scala 简介:</strong></p>
<p>Scala 是一门基于 JVM 的多范式编程语言，通俗的说：Scala 是一种运行在 JVM 上的函数式的面向对象语言，之所以这样命名是因为它的设计目标是：随着用户的需求一起成长。Scala 可被广泛应用于各种编程任务，从编写小型的脚本到构建巨型系统都能胜任。正因如此，Scala 得以提供一些出众的特性，例如：它集成了面向对象编程和面向函数式编程的各种特性，以及更高层的并发模型。<br><a id="more"></a></p>
<hr>
<p><strong>Scala 语言的特点：</strong></p>
<ul>
<li><p><strong>兼容性</strong></p>
<p>兼容 Java，可以访问庞大的 Java 类库，例如操作 mysql、redis 等。</p>
</li>
<li><p><strong>精简的</strong></p>
<p>Scala 表达能力强，一行代码抵得上多行 Java 代码，开发速度快。</p>
</li>
<li><p><strong>高级的</strong></p>
<p>Scala 可以让程序保持短小、清晰，看起来更简洁、优雅。</p>
</li>
<li><p><strong>静态类型的</strong></p>
<p>Scala 拥有非常先进的静态类型系统，支持类型推断和模式匹配等。</p>
</li>
<li><p><strong>可以开发大数据应用程序</strong></p>
<p>例如 spark 、flink 程序等。</p>
</li>
</ul>
<hr>
<p><strong>Scala 程序和 Java 程序的对比：</strong></p>
<ul>
<li>Java 源代码通过 Javac 编译，编译结果为 Java 字节码、Java 类库</li>
<li>Scala 源代码通过 scalac 编译，编译结果为 Java 字节码、Java 类库、Scala 类库</li>
</ul>
<p>使用 Scala 语言创建一个学生类，定义姓名和年龄两个属性，创建一个学生类对象并输出：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建学生类</span></span><br><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params">var name:<span class="type">String</span>, var age:<span class="type">Int</span></span>)</span></span><br><span class="line"><span class="class"><span class="title">//创建学生对象</span></span></span><br><span class="line"><span class="class"><span class="title">val</span> <span class="title">s</span> </span>= <span class="type">Student</span>(<span class="string">"sjh"</span>, <span class="number">24</span>)</span><br><span class="line"><span class="comment">//输出学生对象</span></span><br><span class="line">print(s)</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>环境搭建：</strong></p>
<ul>
<li><p>JDK</p>
</li>
<li><p>Scala SDK</p>
<p>下载地址：<a href="https://www.scala-lang.org/download/" target="_blank" rel="noopener">https://www.scala-lang.org/download/</a></p>
</li>
<li><p>IDEA 在 plugins 中安装 Scala 插件（插件要与 IDEA 版本一致）</p>
<p>下载地址：<a href="https://plugins.jetbrains.com/plugin/1347-scala/versions" target="_blank" rel="noopener">https://plugins.jetbrains.com/plugin/1347-scala/versions</a></p>
</li>
</ul>
<hr>
<p><strong>Scala 解释器：</strong></p>
<p>Scala 解释器就像 Linux 命令一样，执行一条代码马上就可以看到执行结果。</p>
<p>启动解释器：win + R，输入 scala 即可。</p>
<p>打印 hello world：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">println(<span class="string">"hello world"</span>)</span><br></pre></td></tr></table></figure>
<p>退出解释器：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:quit</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>小案例：</strong></p>
<p>提示用户输入一句话，并把它打印出来：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">import</span> java.util.<span class="type">Scanner</span><span class="comment">//导包</span></span><br><span class="line"><span class="keyword">import</span> java.util.<span class="type">Scanner</span></span><br><span class="line"></span><br><span class="line">scala&gt; println(<span class="string">"输入你想说的一句话："</span>)<span class="comment">//提示用户</span></span><br><span class="line">输入你想说的一句话：</span><br><span class="line"></span><br><span class="line">scala&gt; println(<span class="string">"你想说的一句话是："</span>+ <span class="keyword">new</span> <span class="type">Scanner</span>(<span class="type">System</span>.in).nextLine())<span class="comment">//将用户输入输出</span></span><br><span class="line">你想说的一句话是：我正在学<span class="type">Scala</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><h3 id="输出和分号"><a href="#输出和分号" class="headerlink" title="输出和分号"></a>输出和分号</h3><p>换行输出：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">println(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>不换行输出：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>注意：可以同时打印多个值，使用逗号隔开。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">println(<span class="string">"hello scala"</span>)<span class="comment">//单行分号可以不写</span></span><br><span class="line">println(<span class="string">"hello"</span>); println(<span class="string">"scala"</span>)<span class="comment">//多行代码写在一行中间分号不能省略，最后一条代码的分号可省略。</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h3><p>指程序运行过程中值不能发生改变的量。</p>
<ul>
<li><p>字面值常量</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="number">10</span>) <span class="comment">//整形常量</span></span><br><span class="line">print(<span class="number">10.1</span>) <span class="comment">//浮点型常量</span></span><br><span class="line">print(<span class="string">"scala"</span>) <span class="comment">//字符串常量</span></span><br><span class="line">print('a') <span class="comment">//字符常量</span></span><br><span class="line">print(<span class="literal">true</span>, <span class="literal">false</span>) <span class="comment">//布尔常量</span></span><br><span class="line">print(<span class="literal">null</span>) <span class="comment">//空常量</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>自定义常量</p>
</li>
</ul>
<hr>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>格式：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 变量名:变量类型 = 初始值</span><br></pre></td></tr></table></figure>
<p>val 定义的是不可重新赋值的变量，也就是自定义常量。</p>
<p>var 定义的变量可以被重新赋值。</p>
<p>可以使用类型推断来定义变量，代码更简洁：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name:<span class="type">String</span> = <span class="string">"sjh"</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"sjh"</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p>Scala 提供多种定义字符串的形式</p>
<ul>
<li><p>使用双引号</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"sjh"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用插值表达式，有效避免大量字符串拼接</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 变量名 = <span class="string">s"&#123;变量/表达式&#125;字符串"</span></span><br></pre></td></tr></table></figure>
<p>实例：定义三个变量，分别保存姓名，年龄，性别，定义一个字符串保存这些信息</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> name = <span class="string">"sjh"</span> <span class="comment">//定义姓名</span></span><br><span class="line">name: <span class="type">String</span> = sjh</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> age = <span class="number">24</span> <span class="comment">//定义年龄</span></span><br><span class="line">age: <span class="type">Int</span> = <span class="number">24</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> sex = <span class="string">"male"</span> <span class="comment">//定义性别</span></span><br><span class="line">sex: <span class="type">String</span> = male</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> res = <span class="string">s"name=<span class="subst">$&#123;name&#125;</span>,age=<span class="subst">$&#123;age&#125;</span>,sex=<span class="subst">$&#123;sex&#125;</span>"</span> <span class="comment">//保存信息</span></span><br><span class="line">res: <span class="type">String</span> = name=sjh,age=<span class="number">24</span>,sex=male</span><br><span class="line"></span><br><span class="line">scala&gt; print(res) <span class="comment">//输出</span></span><br><span class="line">name=sjh,age=<span class="number">24</span>,sex=male</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用三引号，可以保存大量文本，例如大段 SQL 语句，三引号中的所有内容都会作为字符串的值</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 变量名 = <span class="string">""</span><span class="string">"  字符串的值  "</span><span class="string">""</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>惰性赋值</p>
<p>在大数据开发中有时会编写非常复杂的 SQL 语句，当一些变量保存的数据较大时，而这些数据又不需要马上加载到 JVM 中，可以使用惰性赋值来提高效率。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lazy</span> <span class="keyword">val</span>/<span class="keyword">var</span> 变量名 = 值</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h3><p>标识符就是给变量、方法、类起名字的，Scala 和 Java 中的标识符非常相似。</p>
<p><strong>命名规则：</strong></p>
<ul>
<li>必须由 大小写英文字母、数字、下划线<code>_</code>、美元符号<code>$</code> 四部分任意组合。</li>
<li>数字不能开头。</li>
<li>不能和 Scala 关键字重名。</li>
<li>最好做到见名知意。</li>
</ul>
<hr>
<p><strong>命名规范：</strong></p>
<ul>
<li>变量或方法：小驼峰命名，从第二个单词开始每个单词首字母大写。</li>
<li>类或特质：大驼峰命名，每个单词的首字母都大写。</li>
<li>包：全部小写，一般是公司域名反写，多级包用<code>.</code>隔开。</li>
</ul>
<hr>
<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>Scala 也是一门强类型语言，它里面的数据类型绝大多数与 Java 一样。</p>
<table>
<thead>
<tr>
<th>基础类型</th>
<th>类型说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Byte</td>
<td>8 位带符号整数</td>
</tr>
<tr>
<td>Short</td>
<td>16 位带符号整数</td>
</tr>
<tr>
<td>Int</td>
<td>32 位带符号整数</td>
</tr>
<tr>
<td>Long</td>
<td>64 位带符号整数</td>
</tr>
<tr>
<td>Char</td>
<td>16 位无符号 Unicode 字符</td>
</tr>
<tr>
<td>String</td>
<td>Char 类型的序列，字符串</td>
</tr>
<tr>
<td>Float</td>
<td>32 位单精度浮点数</td>
</tr>
<tr>
<td>Double</td>
<td>64 位单精度浮点数</td>
</tr>
<tr>
<td>Boolean</td>
<td>true 或 false</td>
</tr>
</tbody>
</table>
<p><strong>Scala 和 Java 类型的区别：</strong></p>
<ul>
<li>所有类型都以大写字母开头</li>
<li>整形使用 Int 而不是 Integer</li>
<li>定义变量可以不写类型，让编译器自动推断</li>
<li>默认整形是 Int，默认浮点型是 Double</li>
</ul>
<p><strong>Scala 的类型关系图：</strong></p>
<p>Any 是所有类型的父类，相当于 Java 中的 Object 类。</p>
<p>AnyVal 是所有数值类型的父类，AnyRef 是所有引用类型的父类。</p>
<p>Unit 类似于 Java 中的 void，一般作为返回值。</p>
<p>Null 是所有引用类型的子类，只有一个实例 null。</p>
<p>Nothing 是所有数据类型的子类，不能创建该类型实例，一般结合异常使用。</p>
<p><img src="http://img2018.cnblogs.com/blog/906988/201810/906988-20181018233053891-816216903.png" style="zoom:80%;" align="left"></p>
<hr>
<h3 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h3><p>当 Scala 程序在进行运算或赋值时，范围小的数据类型会自动转换为范围大的数据类型值，然后再进行计算。</p>
<p>类型转换分为值类型转换和引用类型转换，值类型转换又分为自动类型转换和强制类型转换。</p>
<ul>
<li><p>自动类型转换</p>
<p>范围小的数据类型值会自动转换为范围大的数据类型值，自动类型转换从小到大依次为：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Byte</span> -&gt; <span class="type">Short</span> -&gt; <span class="type">Int</span> -&gt; <span class="type">Long</span> -&gt; <span class="type">Float</span> -&gt; <span class="type">Double</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>强制类型转换</p>
<p>将范围大的数据类型值通过一定格式转换为范围小的数据类型值（可能会造成精度缺失）。</p>
<p>格式：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 变量名:数据类型 = 具体的值.toXxx</span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">var</span> a:<span class="type">Int</span> = <span class="number">1</span></span><br><span class="line">a: <span class="type">Int</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">var</span> b:<span class="type">Short</span> = a.toShort</span><br><span class="line">b: <span class="type">Short</span> = <span class="number">1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>值类型和 String 类型的相互转换</p>
<p>值类型转 String 格式：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 变量名:<span class="type">String</span> = 值类型 + <span class="string">""</span></span><br><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 变量名:<span class="type">String</span> = 值类型.toString</span><br></pre></td></tr></table></figure>
<p>String 类型转值类型格式：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 变量名:值类型 = 字符串值.toXxx<span class="comment">//如果转换Char要使用toCharArray</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="键盘录入"><a href="#键盘录入" class="headerlink" title="键盘录入"></a>键盘录入</h3><p><strong>使用步骤：</strong></p>
<ul>
<li><p>导包</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scala.io.<span class="type">StdIn</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>通过 <code>stdIn.readXxx()</code> 接收用户键盘录入的数据</p>
<p>接收字符串数据：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">StdIn</span>.readLine()</span><br></pre></td></tr></table></figure>
<p>接收整数数据：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">StdIn</span>.readInt()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<p>示例：提示用户输入字符串</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">import</span> scala.io.<span class="type">StdIn</span></span><br><span class="line"><span class="keyword">import</span> scala.io.<span class="type">StdIn</span></span><br><span class="line"></span><br><span class="line">scala&gt; print(<span class="string">"输入一句话:"</span>)</span><br><span class="line">输入一句话:</span><br><span class="line">scala&gt; print(<span class="string">"输入的是："</span>+<span class="type">StdIn</span>.readLine())</span><br><span class="line">输入的是：scala</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><h3 id="算数运算符"><a href="#算数运算符" class="headerlink" title="算数运算符"></a>算数运算符</h3><p>包括 <code>+</code>（加号）、<code>-</code>（减号）、<code>*</code>（乘号）、<code>/</code>（除号）、<code>%</code>（取余）。</p>
<p>Scala中没有 <code>++</code>，<code>--</code>这两个运算符。</p>
<p><code>a % b</code>，底层是 <code>a - a/b * b</code></p>
<p>Scala 中把字符串和整数数字 n 相乘相当于让字符串重复 n 次。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; print(<span class="string">"x"</span>*<span class="number">3</span>)</span><br><span class="line">xxx</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h3><ul>
<li>基本赋值运算符 <code>=</code></li>
<li>扩展赋值运算符 <code>+=</code>、<code>-=</code>、<code>*=</code>、<code>/=</code>、<code>%=</code></li>
</ul>
<hr>
<h3 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h3><p>包括<code>&gt;</code>、<code>&gt;=</code>、<code>&lt;</code>、<code>&lt;=</code>、<code>==</code>、<code>!=</code></p>
<p>最终结果一定是 true 或 false。</p>
<p>如果需要比较数据值，使用<code>==</code>或者<code>!=</code>，如果比较引用值需要使用 eq 方法。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> s1 = <span class="string">"a"</span></span><br><span class="line">s1: <span class="type">String</span> = a</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> s2 = s1 + <span class="string">""</span></span><br><span class="line">s2: <span class="type">String</span> = a</span><br><span class="line"></span><br><span class="line">scala&gt; print(s1 == s2)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line">scala&gt; print(s1.eq(s2))</span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><p>包括 <code>&amp;&amp;</code>、<code>||</code>、<code>!</code></p>
<p>最终结果一定是 true 或 false。</p>
<hr>
<h3 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h3><p>包括<code>&amp;</code>（按位与）、<code>|</code>（按位或）、<code>^</code>（按位异或）、<code>~</code>（按位取反）、<code>&lt;&lt;</code>（左移一位，相当于乘2）、<code>&gt;&gt;</code>（右移一位，相当于除以2）</p>
<p>位运算符只针对于整形数据，运算符操作的是数据的二进制补码形式。</p>
<hr>
<h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><h3 id="顺序结构"><a href="#顺序结构" class="headerlink" title="顺序结构"></a>顺序结构</h3><p>程序按照从上至下、从左至右的顺序依次逐行执行，中间没有任何判断和跳转。</p>
<p>顺序结构是 Scala 中的默认流程结构。</p>
<hr>
<h3 id="选择结构"><a href="#选择结构" class="headerlink" title="选择结构"></a>选择结构</h3><p><strong>if 注意事项：</strong></p>
<ul>
<li><p>和 Java 一样，如果大括号内只有一行代码可省略大括号</p>
</li>
<li><p>条件表达式有返回值</p>
</li>
<li><p>没有三元表达式，可以使用 <code>if-else</code> 代替</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; println(<span class="keyword">if</span>(<span class="number">1</span>==<span class="number">1</span>) <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span>)</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<p><strong>块表达式：</strong></p>
<p>使用一对大括号表示一个块表达式，块表达式也是有返回值的，最后一个表达式的值就是返回值</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> n = &#123;</span><br><span class="line">     | println(<span class="number">1</span>)</span><br><span class="line">     | <span class="number">1</span>+<span class="number">2</span></span><br><span class="line">     | &#125;</span><br><span class="line"><span class="number">1</span></span><br><span class="line">n: <span class="type">Int</span> = <span class="number">3</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="循环结构"><a href="#循环结构" class="headerlink" title="循环结构"></a>循环结构</h3><h4 id="for-循环"><a href="#for-循环" class="headerlink" title="for 循环"></a><strong>for 循环</strong></h4><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i &lt;- 表达式/数组/集合)&#123;</span><br><span class="line">	<span class="comment">//逻辑</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>例如：打印10次 “hello scala”</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> n = <span class="number">1</span> to <span class="number">10</span></span><br><span class="line">n: scala.collection.immutable.<span class="type">Range</span>.<span class="type">Inclusive</span> = <span class="type">Range</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">for</span>( i &lt;- n)&#123;</span><br><span class="line">     | println(<span class="string">"hello scala"</span>)</span><br><span class="line">     | &#125;</span><br><span class="line">hello scala</span><br><span class="line">hello scala</span><br><span class="line">hello scala</span><br><span class="line">hello scala</span><br><span class="line">hello scala</span><br><span class="line">hello scala</span><br><span class="line">hello scala</span><br><span class="line">hello scala</span><br><span class="line">hello scala</span><br><span class="line">hello scala</span><br></pre></td></tr></table></figure>
<p><strong>守卫：</strong>for 表达式中的 if 判断语句。</p>
<p>例如输出1 - 10 之间的偶数：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">for</span>(i &lt;- <span class="number">1</span> to <span class="number">10</span> <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span> ) println(i)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">10</span></span><br></pre></td></tr></table></figure>
<p><strong>推导式：</strong>Scala 中的 for 循环也有返回值，可以使用 yield 表达式构建出一个集合。</p>
<p>例如，生成一个10、20…100 的集合：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> set = <span class="keyword">for</span>(i &lt;- <span class="number">1</span> to <span class="number">10</span>) <span class="keyword">yield</span> i * <span class="number">10</span></span><br><span class="line">set: scala.collection.immutable.<span class="type">IndexedSeq</span>[<span class="type">Int</span>] = <span class="type">Vector</span>(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>, <span class="number">60</span>, <span class="number">70</span>, <span class="number">80</span>, <span class="number">90</span>, <span class="number">100</span>)</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="while-循环"><a href="#while-循环" class="headerlink" title="while 循环"></a>while 循环</h4><p><strong>格式：</strong></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">初始化条件</span><br><span class="line"><span class="keyword">while</span>(判断条件)&#123;</span><br><span class="line">	<span class="comment">//循环体</span></span><br><span class="line">	<span class="comment">//控制条件</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>例如：打印 1-5 的数字</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">var</span> i = <span class="number">1</span></span><br><span class="line">i: <span class="type">Int</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">while</span>(i &lt;= <span class="number">5</span>)&#123;</span><br><span class="line">     | println(i)</span><br><span class="line">     | i += <span class="number">1</span></span><br><span class="line">     | &#125;</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="do-while-循环"><a href="#do-while-循环" class="headerlink" title="do-while 循环"></a>do-while 循环</h4><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">初始化条件</span><br><span class="line">do&#123;</span><br><span class="line">	<span class="comment">//循环体</span></span><br><span class="line">	<span class="comment">//控制条件</span></span><br><span class="line">&#125;<span class="keyword">while</span>(判断条件)</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="break-和-continue"><a href="#break-和-continue" class="headerlink" title="break 和 continue"></a>break 和 continue</h4><p>在 Scala 中，移除了 break 和 continue 关键字</p>
<p>如果要使用，需要 <code>scala.util.controle</code> 包下的 Breaks 类的 <code>breakable</code> 和 <code>break</code> 方法</p>
<p><strong>用法：</strong></p>
<ul>
<li><p>导包：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scala.util.control.<span class="type">Breaks</span>._</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用 breakable 将 for 表达式包起来</p>
</li>
<li><p>for 表达式中需要退出循环的地方，添加 <code>break()</code> 方法调用。</p>
</li>
</ul>
<p>例如输出 1-10 的数字，遇到5退出：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; breakable&#123;</span><br><span class="line">     |   <span class="keyword">for</span>( i &lt;- <span class="number">1</span> to <span class="number">10</span>)&#123;</span><br><span class="line">     |     <span class="keyword">if</span>(i == <span class="number">5</span>) <span class="keyword">break</span>() <span class="keyword">else</span> print(i)</span><br><span class="line">     |   &#125;</span><br><span class="line">     | &#125;</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>
<hr>
<p>continue 的实现和 break 类似，不同的是需要使用 continue 的地方是用 breakable 将 for 表达式的循环体包起来即可。</p>
<p>例如输出 1-10 不能整除 3 的数字：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="keyword">for</span>(i &lt;- <span class="number">1</span> to <span class="number">10</span>)&#123;</span><br><span class="line">     |   breakable&#123;</span><br><span class="line">     |     <span class="keyword">if</span>(i % <span class="number">3</span> == <span class="number">0</span>) <span class="keyword">break</span>() <span class="keyword">else</span> print(i)</span><br><span class="line">     |   &#125;</span><br><span class="line">     | &#125;</span><br><span class="line"><span class="number">12457810</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="案例：打印九九乘法表"><a href="#案例：打印九九乘法表" class="headerlink" title="案例：打印九九乘法表"></a>案例：打印九九乘法表</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(row &lt;- <span class="number">1</span> to <span class="number">9</span>)&#123;</span><br><span class="line">	<span class="keyword">for</span>(col &lt;- <span class="number">1</span> to row)&#123;</span><br><span class="line">		print(<span class="string">s"<span class="subst">$&#123;col&#125;</span> x <span class="subst">$&#123;row&#125;</span> = <span class="subst">$&#123;col * row&#125;</span>\t"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	println()</span><br><span class="line">&#125;</span><br><span class="line">或</span><br><span class="line"><span class="keyword">for</span>(row &lt;- <span class="number">1</span> to <span class="number">9</span>;col &lt;- <span class="number">1</span> to row)&#123;</span><br><span class="line">	print(<span class="string">s"<span class="subst">$&#123;col&#125;</span> x <span class="subst">$&#123;row&#125;</span> = <span class="subst">$&#123;col * row&#125;</span>\t"</span>)</span><br><span class="line">	<span class="keyword">if</span>(row == col) println()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="方法和函数"><a href="#方法和函数" class="headerlink" title="方法和函数"></a>方法和函数</h2><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><p><strong>语法格式：</strong></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">方法名</span></span>(参数名<span class="number">1</span>:参数类型<span class="number">1</span>, 参数名<span class="number">2</span>:参数类型<span class="number">2.</span>..)[: 返回值类型] = &#123;</span><br><span class="line">	<span class="comment">//方法体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意：</p>
<ul>
<li>参数列表的参数类型不能省略</li>
<li>返回值类型可以省略，由 Scala 编译器自动推断</li>
<li>返回值可以不写 return ，默认就是块表达式的值</li>
</ul>
<hr>
<p>示例：定义一个方法用来获取两个整形数字的最大值并返回结果。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getMax</span></span>(num1:<span class="type">Int</span>, num2:<span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">if</span>(num1 &gt;= num2) num1 <span class="keyword">else</span> num2 </span><br><span class="line">&#125;</span><br><span class="line">或</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getMax</span></span>(num1:<span class="type">Int</span>, num2:<span class="type">Int</span>) = <span class="keyword">if</span>(num1 &gt;= num2) num1 <span class="keyword">else</span> num2</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="返回值的类型推断"><a href="#返回值的类型推断" class="headerlink" title="返回值的类型推断"></a><strong>返回值的类型推断</strong></h4><p>当定义递归方法时，不能省略返回值的类型。</p>
<p>示例：定义一个方法求 5 的阶乘。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span></span>(n:<span class="type">Int</span>):<span class="type">Int</span> = <span class="keyword">if</span>(n == <span class="number">1</span>) n <span class="keyword">else</span> n * f(n - <span class="number">1</span>)</span><br><span class="line">print(f(<span class="number">5</span>))</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="惰性方法"><a href="#惰性方法" class="headerlink" title="惰性方法"></a><strong>惰性方法</strong></h4><p>当记录方法返回值的变量被声明为 lazy 时，方法的执行将被推迟，直到我们再次使用该值时方法才会执行，像这样的方法就叫做惰性方法。</p>
<p><strong>注意：</strong>lazy 不能修饰 var 类型的变量。</p>
<p><strong>使用场景：</strong></p>
<ul>
<li>打开数据库连接</li>
<li>提升某些特定模块的启动时间</li>
<li>确保对象中的某些字段优先初始化</li>
</ul>
<p>示例：定义一个方法获取两个整数和，使用惰性技术调用该方法，然后打印结果。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="function"><span class="keyword">def</span> <span class="title">add</span></span>(num1:<span class="type">Int</span>, num2:<span class="type">Int</span>) = num1 + num2</span><br><span class="line">add: (num1: <span class="type">Int</span>, num2: <span class="type">Int</span>)<span class="type">Int</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">lazy</span> <span class="keyword">val</span> sum:<span class="type">Int</span> = add(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">sum: <span class="type">Int</span> = &lt;<span class="keyword">lazy</span>&gt;</span><br><span class="line"></span><br><span class="line">scala&gt; print(sum)</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="方法参数"><a href="#方法参数" class="headerlink" title="方法参数"></a><strong>方法参数</strong></h4><ul>
<li><p><strong>默认参数</strong></p>
<p>定义方法时可以给参数一个默认值并调用无参方法，例如：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span></span>(num1:<span class="type">Int</span> = <span class="number">1</span>, num2:<span class="type">Int</span> = <span class="number">1</span>) = num1 + num2</span><br><span class="line">print(add())<span class="comment">//2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>带名参数</strong></p>
<p>调用方法时可以指定参数的名称进行调用，例如</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span></span>(num1:<span class="type">Int</span> = <span class="number">1</span>, num2:<span class="type">Int</span> = <span class="number">1</span>) = num1 + num2</span><br><span class="line">print(add(num1 = <span class="number">2</span>))<span class="comment">//3</span></span><br><span class="line">print(add(<span class="number">10</span>))<span class="comment">//11</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>变长参数</strong></p>
<p>如果方法的参数是不固定的，可以将该方法的参数定义为变长参数。</p>
<p><strong>格式：</strong></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">方法名</span></span>(参数名:参数类型*)[: 返回值类型] = &#123;</span><br><span class="line">	<span class="comment">//方法体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>一个方法有且只能有一个变长参数，并且变长参数要放到参数列表的最后面。</p>
<p>例如：定义一个方法计算 n 个数字的和。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getSum</span></span>(nums:<span class="type">Int</span>*) = nums.sum</span><br><span class="line">print(getSum())<span class="comment">//0</span></span><br><span class="line">print(getSum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>))<span class="comment">//10</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h4 id="方法调用方式"><a href="#方法调用方式" class="headerlink" title="方法调用方式"></a><strong>方法调用方式</strong></h4><ul>
<li><p><strong>后缀调用法</strong></p>
<p>与 Java 相同，格式：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">对象名.方法名(参数)</span><br><span class="line">例如：<span class="type">Math</span>.abs(<span class="number">-1</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>中缀调用法</strong></p>
<p>格式：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">对象名 方法名 参数</span><br><span class="line">例如：<span class="type">Math</span> abs <span class="number">-1</span></span><br></pre></td></tr></table></figure>
<p>在 Scala 中所有的操作符都是方法，操作符是一个方法名是符号的方法。</p>
</li>
<li><p><strong>花括号调用法</strong></p>
<p>方法只有一个参数时才能使用花括号调用法。</p>
<p>例如：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">scala&gt; <span class="type">Math</span>.abs&#123;</span><br><span class="line">     | print(<span class="string">"求绝对值，结果是："</span>)</span><br><span class="line">     | <span class="number">-1</span></span><br><span class="line">     | &#125;</span><br><span class="line">求绝对值，结果是：res30: <span class="type">Int</span> = <span class="number">1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>无括号调用法</strong></p>
<p>如果方法没有参数，可以省略方法后面的括号。</p>
<p>例如：定义一个无参方法打印”hello scala”，使用无括号调用法</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">say</span></span>() = print(<span class="string">"hello scala"</span>)</span><br><span class="line">say<span class="comment">//hello scala</span></span><br></pre></td></tr></table></figure>
<p>如果方法的返回值类型是 Unit，这样的方法称为过程，过程的 <code>=</code> 可以省略不写，花括号不能省略：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">say</span></span>() &#123; print(<span class="string">"hello scala"</span>) &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>Scala 支持函数式编程，Spark/Flink 程序会大量使用函数。</p>
<h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> 函数变量名 = (参数名<span class="number">1</span>:参数类型<span class="number">1</span>, 参数名<span class="number">2</span>:参数类型<span class="number">2.</span>..) =&gt; 函数体</span><br></pre></td></tr></table></figure>
<p>函数是一个对象</p>
<p>类似于方法，函数也有参数列表和返回值</p>
<p>函数定义不需要使用 def 定义</p>
<p>无需指定返回值类型</p>
<p>示例：定义一个计算两个整数之和的函数。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> getSum = (a:<span class="type">Int</span>, b:<span class="type">Int</span>) =&gt; a + b</span><br><span class="line"><span class="keyword">val</span> sum = getSum(<span class="number">1</span>, <span class="number">2</span>)<span class="comment">//3</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="方法和函数的区别"><a href="#方法和函数的区别" class="headerlink" title="方法和函数的区别"></a>方法和函数的区别</h4><p>方法属于类或者对象，在运行时会加载到 JVM 的方法区。</p>
<p>可以将函数对象赋值给一个变量，在运行时会加载到 JVM 的堆中。</p>
<p>函数是一个对象，继承自 FunctionN，函数对象有apply、curried、toString、tupled这些方法，方法则没有。</p>
<p>结论：在 Scala 中，函数是对象，而方法是属于对象的，可以理解为：方法归属于函数。</p>
<p>可以通过在方法后加上空格和下划线将其转为函数，例如定义一个求和方法并转为函数：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span></span>(a:<span class="type">Int</span>, b:<span class="type">Int</span>):<span class="type">Int</span> = a + b</span><br><span class="line"><span class="keyword">val</span> func = add _</span><br><span class="line">func(<span class="number">1</span>, <span class="number">2</span>)<span class="comment">//3</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="案例：打印nn乘法表"><a href="#案例：打印nn乘法表" class="headerlink" title="案例：打印nn乘法表"></a>案例：打印nn乘法表</h3><p><strong>通过方法：</strong></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write</span></span>(n:<span class="type">Int</span>)&#123;</span><br><span class="line">    <span class="keyword">for</span>(row &lt;- <span class="number">1</span> to n;col &lt;- <span class="number">1</span> to row)&#123;</span><br><span class="line">        print(<span class="string">s"<span class="subst">$&#123;col&#125;</span> x <span class="subst">$&#123;row&#125;</span> = <span class="subst">$&#123;col * row&#125;</span>\t"</span>)</span><br><span class="line">        <span class="keyword">if</span>(row == col) println()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>通过函数：</strong></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> func = (n:<span class="type">Int</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">for</span>(row &lt;- <span class="number">1</span> to n;col &lt;- <span class="number">1</span> to row)&#123;</span><br><span class="line">        print(<span class="string">s"<span class="subst">$&#123;col&#125;</span> x <span class="subst">$&#123;row&#125;</span> = <span class="subst">$&#123;col * row&#125;</span>\t"</span>)</span><br><span class="line">        <span class="keyword">if</span>(row == col) println()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="类和对象"><a href="#类和对象" class="headerlink" title="类和对象"></a>类和对象</h2><h3 id="类和对象-1"><a href="#类和对象-1" class="headerlink" title="类和对象"></a>类和对象</h3><p>创建类和对象可以通过 class 和 new 关键字实现，用 class 创建类，用 new 创建对象。</p>
<p>示例：创建一个 Person 类，然后创建其对象并打印。</p>
<ul>
<li>创建一个 Scala 项目，并创建一个 Object 类（Object 修饰的类是单例对象）。</li>
<li>在 object 类中添加 main 方法。</li>
<li>创建 Person 类，并在 main 方法中创建 Person 类的对象然后输出结果。</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//实体类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">----------------------------------------------</span><br><span class="line"><span class="comment">//测试类</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//main方法，作为程序主入口，所有代码执行都从这里开始</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//创建 Person 对象</span></span><br><span class="line">    <span class="keyword">val</span> person = <span class="keyword">new</span> <span class="type">Person</span>()</span><br><span class="line">    <span class="comment">//打印对象</span></span><br><span class="line">    println(person)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>如果类是空的，没有任何成员，可以省略<code>{}</code></p>
<p>如果构造器参数为空，可以省略<code>()</code></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//简写类和对象</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class">  </span></span><br><span class="line"><span class="class">  <span class="title">def</span> <span class="title">main</span>(<span class="params">args: <span class="type">Array</span>[<span class="type">String</span>]</span>)</span>: <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> person = <span class="keyword">new</span> <span class="type">Person</span></span><br><span class="line">    println(person)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="成员变量"><a href="#成员变量" class="headerlink" title="成员变量"></a>成员变量</h3><p>可以使用 var/val 定义成员变量，对象通过 <code>对象名.</code> 的方式访问成员变量。</p>
<p>示例：定义一个 Person 类，包含一个姓名和年龄字段，创建一个具体对象并打印。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">""</span></span><br><span class="line">    <span class="keyword">var</span> age = <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> person = <span class="keyword">new</span> <span class="type">Person</span></span><br><span class="line">    person.name = <span class="string">"sjh"</span></span><br><span class="line">    person.age = <span class="number">24</span></span><br><span class="line">    print(<span class="string">s"姓名：<span class="subst">$&#123;person.name&#125;</span>,年龄：<span class="subst">$&#123;person.age&#125;</span>"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="使用下划线初始化成员变量"><a href="#使用下划线初始化成员变量" class="headerlink" title="使用下划线初始化成员变量"></a>使用下划线初始化成员变量</h3><p>在定义 var 类型的成员变量时，可以使用 <code>_</code> 初始化成员变量。</p>
<p>val 类型的成员变量，必须要自己手动初始化。</p>
<p>例如：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name:<span class="type">String</span> = _</span><br><span class="line">    <span class="keyword">var</span> age:<span class="type">Int</span> = _</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="定义和访问成员方法"><a href="#定义和访问成员方法" class="headerlink" title="定义和访问成员方法"></a>定义和访问成员方法</h3><p>在 Scala 的类中，也是使用 def 定义方法。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name:<span class="type">String</span> = _</span><br><span class="line">    <span class="keyword">var</span> age:<span class="type">Int</span> = _</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">printHello</span></span>(msg:<span class="type">String</span>): <span class="type">Unit</span> = print(msg)</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> person = <span class="keyword">new</span> <span class="type">Person</span></span><br><span class="line">    print(person.printHello(<span class="string">"hello scala"</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="访问修饰符"><a href="#访问修饰符" class="headerlink" title="访问修饰符"></a>访问修饰符</h3><p>在 Scala 中没有 public 关键字，没有被标记为 private 和 protected 的成员都是公共的。</p>
<p>Scala 中的权限修饰符只有：privat、private[this]、protected、默认。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> name:<span class="type">String</span> = _</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> age:<span class="type">Int</span> = _</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取姓名</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getName</span></span>:<span class="type">String</span> = name</span><br><span class="line">    <span class="comment">//设置姓名</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setName</span></span>(name:<span class="type">String</span>): <span class="type">Unit</span> = <span class="keyword">this</span>.name = name</span><br><span class="line">    <span class="comment">//获取年龄</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getAge</span></span>:<span class="type">Int</span> = age</span><br><span class="line">    <span class="comment">//设置年龄</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setAge</span></span>(age:<span class="type">Int</span>): <span class="type">Unit</span> = <span class="keyword">this</span>.age = age</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> person = <span class="keyword">new</span> <span class="type">Person</span></span><br><span class="line">    person.setName(<span class="string">"sjh"</span>)</span><br><span class="line">    person.setAge(<span class="number">24</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="构造器"><a href="#构造器" class="headerlink" title="构造器"></a>构造器</h3><h4 id="主构造器"><a href="#主构造器" class="headerlink" title="主构造器"></a>主构造器</h4><p><strong>语法：</strong></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">类名</span>(<span class="params">var/val 参数名:类型 = 默认值，...</span>)</span>&#123;</span><br><span class="line">	<span class="comment">//构造代码块</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params">var name:<span class="type">String</span> = "sjh",var age:<span class="type">Int</span> = 24</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//空参</span></span><br><span class="line">    <span class="keyword">val</span> p1 = <span class="keyword">new</span> <span class="type">Person</span>(<span class="string">"s"</span>,<span class="number">2</span>)</span><br><span class="line">    <span class="comment">//全参</span></span><br><span class="line">    <span class="keyword">val</span> p2 = <span class="keyword">new</span> <span class="type">Person</span>()</span><br><span class="line">    <span class="comment">//指定参数</span></span><br><span class="line">    <span class="keyword">val</span> p3 = <span class="keyword">new</span> <span class="type">Person</span>(age = <span class="number">2</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="辅助构造器"><a href="#辅助构造器" class="headerlink" title="辅助构造器"></a>辅助构造器</h4><p>语法：</p>
<p>辅助构造器方法名必须叫 this。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(参数名:类型，...)&#123;</span><br><span class="line">	<span class="comment">//第一行需要调用主构造器或其他构造器</span></span><br><span class="line">	<span class="comment">//构造器代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Customer</span>(<span class="params">var name:<span class="type">String</span>,var address:<span class="type">String</span></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(array: <span class="type">Array</span>[<span class="type">String</span>]) = &#123;</span><br><span class="line">        <span class="keyword">this</span>(array(<span class="number">0</span>),array(<span class="number">1</span>))</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//通过辅助构造器创建对象</span></span><br><span class="line">    <span class="keyword">val</span> customer = <span class="keyword">new</span> <span class="type">Customer</span>(<span class="type">Array</span>(<span class="string">"sjh"</span>, <span class="string">"xi'an"</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="单例对象"><a href="#单例对象" class="headerlink" title="单例对象"></a>单例对象</h3><p>定义单例对象和定义类很像，就是把 class 换成 object。</p>
<p>格式：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">单例对象名</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>在 object 中定义的成员变量类似 Java 中的静态变量，在内存中只有一个对象。</p>
<p>单例对象中，可以直接使用 <code>单例对象名.</code>的方式调用成员。</p>
<p>例如：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">object</span> <span class="title">Dog</span></span>&#123;</span><br><span class="line">    <span class="keyword">val</span> leg_num = <span class="number">4</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    print(<span class="type">Dog</span>.leg_num)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>单例对象中的方法类似 Java 中的静态方法</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">object</span> <span class="title">Dog</span></span>&#123;</span><br><span class="line">    <span class="keyword">val</span> leg_num = <span class="number">4</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">say</span></span>(): <span class="type">Unit</span> = print(<span class="string">"dog"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="type">Dog</span>.say()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="main-方法"><a href="#main-方法" class="headerlink" title="main 方法"></a>main 方法</h3><p>在 Java 中 main 方法是静态的，Scala 中没有 main 方法，所以必须将其放在一个单例对象中。</p>
<ul>
<li><p>创建单例对象</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    print(<span class="string">"hello scala"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>继承 App 特质</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> <span class="keyword">extends</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    print(<span class="string">"hello scala"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="伴生对象"><a href="#伴生对象" class="headerlink" title="伴生对象"></a>伴生对象</h3><p>在 Java 中有一些类会同时有静态内容和非静态内容，在 Scala 中想要实现类似效果可以使用伴生对象来实现。</p>
<p>一个 class 和 object 具有相同的名字，这个 object 被称为伴生对象，这个 class 被称为半生类。</p>
<p>伴生对象和半生类可以互相访问 private 属性，必须写在一个源文件。</p>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//半生类，里面内容非静态</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span></span>(): <span class="type">Unit</span> = print(<span class="string">"eat "</span> + <span class="type">Person</span>.food)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//伴生对象</span></span><br><span class="line">  <span class="class"><span class="keyword">object</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> food = <span class="string">"rice"</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> person = <span class="keyword">new</span> <span class="type">Person</span></span><br><span class="line">    person.eat()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果某个成员变量权限为 private[this]，表示只能在当前类访问，伴生对象也不能直接访问。</p>
<hr>
<h4 id="apply-方法"><a href="#apply-方法" class="headerlink" title="apply 方法"></a>apply 方法</h4><p>可以在创建对象时免去 new 操作，格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">object 伴生对象名&#123;</span><br><span class="line">	def apply(参数名:参数类型...) = new 类(...)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//半生类</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params">name:<span class="type">String</span>, age:<span class="type">Int</span></span>)</span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//伴生对象</span></span><br><span class="line">  <span class="class"><span class="keyword">object</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(name:<span class="type">String</span>, age:<span class="type">Int</span>): <span class="type">Person</span> = <span class="keyword">new</span> <span class="type">Person</span>(name, age)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> person = <span class="type">Person</span>(<span class="string">"sjh"</span>, <span class="number">24</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="案例：定义工具类"><a href="#案例：定义工具类" class="headerlink" title="案例：定义工具类"></a>案例：定义工具类</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.<span class="type">SimpleDateFormat</span></span><br><span class="line"><span class="keyword">import</span> java.util.<span class="type">Date</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">DateUtils</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> sdf:<span class="type">SimpleDateFormat</span> = _</span><br><span class="line"></span><br><span class="line">  <span class="comment">//日期转字符串</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">date2String</span></span>(date:<span class="type">Date</span>, template:<span class="type">String</span>): <span class="type">String</span> = &#123;</span><br><span class="line">    sdf = <span class="keyword">new</span> <span class="type">SimpleDateFormat</span>(template)</span><br><span class="line">    sdf.format(date)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//字符串转日期</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">string2Date</span></span>(dateStr:<span class="type">String</span>, template:<span class="type">String</span>): <span class="type">Date</span> = &#123;</span><br><span class="line">    sdf = <span class="keyword">new</span> <span class="type">SimpleDateFormat</span>(template)</span><br><span class="line">    sdf.parse(dateStr)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="继承和抽象类"><a href="#继承和抽象类" class="headerlink" title="继承和抽象类"></a>继承和抽象类</h2><h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p>语法：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span><span class="title">/object</span> <span class="title">子类</span> <span class="keyword">extends</span> <span class="title">父类</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>子类重写方法必须使用 override 修饰，可以使用 override 重新一个 val 字段，父类的 var 字段不可重写。</p>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">val</span> name = <span class="string">""</span></span><br><span class="line">    <span class="keyword">var</span> age = <span class="number">24</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">say</span></span>(): <span class="type">Unit</span> = print(<span class="string">""</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">val</span> name = <span class="string">"sjh"</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">say</span></span>(): <span class="type">Unit</span> = print(<span class="string">"hello"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> student = <span class="keyword">new</span> <span class="type">Student</span>()</span><br><span class="line">    student.say()<span class="comment">//hello</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="类型判断"><a href="#类型判断" class="headerlink" title="类型判断"></a>类型判断</h3><ul>
<li>isInstanceOf 判断对象是否为指定类的对象</li>
<li>asInstanceOf 将对象转换为指定类型</li>
</ul>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">say</span></span>(): <span class="type">Unit</span> = print(<span class="string">"hello"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> p:<span class="type">Person</span> = <span class="keyword">new</span> <span class="type">Student</span>()</span><br><span class="line">    <span class="keyword">if</span>(p.isInstanceOf[<span class="type">Student</span>]) &#123;</span><br><span class="line">      <span class="keyword">val</span> s = p.asInstanceOf[<span class="type">Student</span>]</span><br><span class="line">      s.say()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>isInstanceOf 只能判断对象是否为指定类以及其子类的对象而不能精确判断其类型，如果精确判断可以使用 getClass 和 classOf 来实现。</p>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> p:<span class="type">Person</span> = <span class="keyword">new</span> <span class="type">Student</span>()</span><br><span class="line">    print(p.getClass == classOf[<span class="type">Person</span>])<span class="comment">//false</span></span><br><span class="line">    print(p.getClass == classOf[<span class="type">Student</span>])<span class="comment">//true</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h3><p>如果类中有抽象字段或抽象方法，那么该类就必须是抽象类。</p>
<p>抽象字段：没有初始化的变量。</p>
<p>抽象方法：没有方法体。</p>
<p>格式：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">抽象类名</span></span>&#123;</span><br><span class="line">	<span class="keyword">val</span>/<span class="keyword">var</span> 抽象字段名:类型</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">方法名</span></span>(参数:参数类型...):返回类型</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Shape</span></span>&#123;</span><br><span class="line">    <span class="keyword">val</span> c:<span class="type">Int</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getArea</span></span>:<span class="type">Double</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Square</span>(<span class="params">x:<span class="type">Int</span></span>) <span class="keyword">extends</span> <span class="title">Shape</span></span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">val</span> c: <span class="type">Int</span> = x</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">getArea</span></span>: <span class="type">Double</span> = c * c</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Circle</span>(<span class="params">r:<span class="type">Int</span></span>) <span class="keyword">extends</span> <span class="title">Shape</span></span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">val</span> c: <span class="type">Int</span> = r</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">getArea</span></span>: <span class="type">Double</span> = <span class="type">Math</span>.<span class="type">PI</span> * c * c</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> square = <span class="keyword">new</span> <span class="type">Square</span>(<span class="number">1</span>)</span><br><span class="line">    println(square.getArea)<span class="comment">//1</span></span><br><span class="line">    <span class="keyword">val</span> circle = <span class="keyword">new</span> <span class="type">Circle</span>(<span class="number">1</span>)</span><br><span class="line">    println(circle.getArea)<span class="comment">//3.141592653589793</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="匿名内部类"><a href="#匿名内部类" class="headerlink" title="匿名内部类"></a>匿名内部类</h3><p>匿名内部类是继承了类的匿名子类对象</p>
<p>语法：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> 类名()&#123;</span><br><span class="line">	<span class="comment">//重写类中所有的抽象内容</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果类的主构造器参数列表为空，小括号可以省略。</p>
<p>作用：对象的成员方法仅调用一次、作为方法的参数传递。</p>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sayHello</span></span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">show</span></span>(person: <span class="type">Person</span>): <span class="type">Unit</span> = person.sayHello()</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> person:<span class="type">Person</span> = <span class="keyword">new</span> <span class="type">Person</span> &#123;</span><br><span class="line">      <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">sayHello</span></span>(): <span class="type">Unit</span> = println(<span class="string">"hello"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    show(person)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="案例：动物类"><a href="#案例：动物类" class="headerlink" title="案例：动物类"></a>案例：动物类</h3><p>定义抽象动物类，属性包括：姓名，年龄，行为：跑步和吃饭</p>
<p>定义猫类，重写吃饭方法，并定义独有抓老鼠方法。</p>
<p>定义狗类，重写吃饭方法，并定义独有看家方法。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">""</span></span><br><span class="line">    <span class="keyword">var</span> age = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span></span>(): <span class="type">Unit</span> = println(<span class="string">"run"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span></span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">eat</span></span>(): <span class="type">Unit</span> = println(<span class="string">"eat fish"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">catchMouse</span></span>(): <span class="type">Unit</span> = println(<span class="string">"catch mouse"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">eat</span></span>(): <span class="type">Unit</span> = println(<span class="string">"eat meat"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">catchThief</span></span>(): <span class="type">Unit</span> = println(<span class="string">"catch thief"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> animal:<span class="type">Animal</span> = <span class="keyword">new</span> <span class="type">Cat</span>()</span><br><span class="line">    <span class="keyword">if</span>(animal.isInstanceOf[<span class="type">Cat</span>]) &#123;</span><br><span class="line">      <span class="keyword">val</span> cat = animal.asInstanceOf[<span class="type">Cat</span>]</span><br><span class="line">      cat.catchMouse()</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(animal.isInstanceOf[<span class="type">Dog</span>]) &#123;</span><br><span class="line">      <span class="keyword">val</span> dog = animal.asInstanceOf[<span class="type">Dog</span>]</span><br><span class="line">      dog.catchThief()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      println(<span class="string">"not cat or dog"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="特质"><a href="#特质" class="headerlink" title="特质"></a>特质</h2><h3 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><p>Scala 中的特质要用关键字 trait 修饰。</p>
<p><strong>特点：</strong></p>
<ul>
<li>特质可以提高代码的复用性。</li>
<li>特质可以提高代码的扩展性和可维护性。</li>
<li>类与特质是继承关系，类与类只支持单继承，类与特质之间可以单继承也可以多继承。</li>
<li>Scala 的特质中可以有普通字段、抽象字段、普通方法、抽象方法。</li>
<li>如果特质只有抽象内容也叫瘦接口，如果既有抽象内容又有具体内容叫做富接口。</li>
</ul>
<hr>
<p><strong>语法：</strong></p>
<p>定义特质</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">特质名称</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>继承特质</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">类名</span> <span class="keyword">extends</span> <span class="title">特质1</span> <span class="keyword">with</span> <span class="title">特质2</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>示例：类继承单个特质</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">trait</span> <span class="title">Logger</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">log</span></span>(msg:<span class="type">String</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">ConsoleLogger</span> <span class="keyword">extends</span> <span class="title">Logger</span></span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">log</span></span>(msg: <span class="type">String</span>): <span class="type">Unit</span> = println(msg)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> logger = <span class="keyword">new</span> <span class="type">ConsoleLogger</span></span><br><span class="line">    logger.log(<span class="string">"hello scala"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>示例：类继承多个特质</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">trait</span> <span class="title">MsgSender</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">send</span></span>(msg:<span class="type">String</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">trait</span> <span class="title">MsgReceiver</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">receive</span></span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">MsgWorker</span> <span class="keyword">extends</span> <span class="title">MsgSender</span> <span class="keyword">with</span> <span class="title">MsgReceiver</span></span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">send</span></span>(msg: <span class="type">String</span>): <span class="type">Unit</span> = println(<span class="string">s"发送消息：<span class="subst">$msg</span>"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">receive</span></span>(): <span class="type">Unit</span> = println(<span class="string">"接收消息"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> worker = <span class="keyword">new</span> <span class="type">MsgWorker</span></span><br><span class="line">    worker.send(<span class="string">"hello"</span>)</span><br><span class="line">    worker.receive()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>示例：object 继承 trait</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">trait</span> <span class="title">MsgSender</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">send</span></span>(msg:<span class="type">String</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">trait</span> <span class="title">MsgReceiver</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">receive</span></span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">object</span> <span class="title">MsgWorker</span> <span class="keyword">extends</span> <span class="title">MsgSender</span> <span class="keyword">with</span> <span class="title">MsgReceiver</span></span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">send</span></span>(msg: <span class="type">String</span>): <span class="type">Unit</span> = println(<span class="string">s"发送消息：<span class="subst">$msg</span>"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">receive</span></span>(): <span class="type">Unit</span> = println(<span class="string">"接收消息"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="type">MsgWorker</span>.send(<span class="string">"hello scala"</span>)</span><br><span class="line">    <span class="type">MsgWorker</span>.receive()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>示例：trait 中的成员</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">trait</span> <span class="title">Hero</span></span>&#123;</span><br><span class="line">    <span class="keyword">val</span> name = <span class="string">""</span></span><br><span class="line">    <span class="keyword">val</span> arms = <span class="string">""</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">attack</span></span>(): <span class="type">Unit</span> = println(<span class="string">"发起进攻"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">skill</span></span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Killer</span> <span class="keyword">extends</span> <span class="title">Hero</span></span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">val</span> name = <span class="string">"sjh"</span></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">val</span> arms = <span class="string">"gun"</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">skill</span></span>(): <span class="type">Unit</span> = println(<span class="string">"kill"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> killer = <span class="keyword">new</span> <span class="type">Killer</span></span><br><span class="line">    killer.attack()</span><br><span class="line">    killer.skill()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="对象混入-trait"><a href="#对象混入-trait" class="headerlink" title="对象混入 trait"></a>对象混入 trait</h3><p>在 Scala 中，类和特质之间无任何继承关系，但通过特定关键字让该类对象具有指定特质中的成员。</p>
<p>语法：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 对象名 = <span class="keyword">new</span> 类 <span class="keyword">with</span> 特质</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">trait</span> <span class="title">Logger</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">log</span></span>(): <span class="type">Unit</span> = println(<span class="string">"log.."</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> user = <span class="keyword">new</span> <span class="type">User</span> <span class="keyword">with</span> <span class="type">Logger</span></span><br><span class="line">    user.log()<span class="comment">//log..</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="使用-trait-实现适配器模式"><a href="#使用-trait-实现适配器模式" class="headerlink" title="使用 trait 实现适配器模式"></a>使用 trait 实现适配器模式</h3><p>当某个特质中有多个抽象方法，而我们只需要用到某个或某几个方法时不得不将该特质所有抽象方法重写。针对这种情况可以定义一个抽象类继承该特质，重写特质的所有方法，方法体为空。需要使用哪个方法只需要定义类继承抽象类，重写指定方法即可。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">trait</span> <span class="title">Play</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mid</span></span>()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">top</span></span>()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">adc</span></span>()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">jungle</span></span>()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">support</span></span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Player</span> <span class="keyword">extends</span> <span class="title">Play</span></span>&#123;</span><br><span class="line">     <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">mid</span></span>(): <span class="type">Unit</span> = &#123;&#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">top</span></span>(): <span class="type">Unit</span> = &#123;&#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">adc</span></span>(): <span class="type">Unit</span> = &#123;&#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">jungle</span></span>(): <span class="type">Unit</span> = &#123;&#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">support</span></span>(): <span class="type">Unit</span> = &#123;&#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//新手类</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">GreenHand</span> <span class="keyword">extends</span> <span class="title">Player</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">support</span></span>(): <span class="type">Unit</span> = println(<span class="string">"我是辅助"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> player = <span class="keyword">new</span> <span class="type">GreenHand</span></span><br><span class="line">    player.support()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="使用-trait-实现模板方法模式"><a href="#使用-trait-实现模板方法模式" class="headerlink" title="使用 trait 实现模板方法模式"></a>使用 trait 实现模板方法模式</h3><p>在 Scala 中我们可以先定义一个操作中的算法骨架，而将算法的一些步骤延迟到子类中，使得子类可以不改变该结构的情况下重定义该算法的某些特定步骤，这就是模板方法设计模式。</p>
<p>优点：扩展性强、符号开闭原则。</p>
<p>缺点：类的个数增加会导致系统庞大，设计更抽象、增加代码阅读难度。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//模板类，计算某个方法的执行时间</span></span><br><span class="line">  <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Template</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">code</span></span>()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getRuntime</span></span>: <span class="type">Long</span> = &#123;</span><br><span class="line">      <span class="keyword">val</span> startTime = <span class="type">System</span>.currentTimeMillis()</span><br><span class="line">      code()</span><br><span class="line">      <span class="keyword">val</span> endTime = <span class="type">System</span>.currentTimeMillis()</span><br><span class="line">      endTime - startTime</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Concrete</span> <span class="keyword">extends</span> <span class="title">Template</span></span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">code</span></span>(): <span class="type">Unit</span> = <span class="keyword">for</span>(_ &lt;- <span class="number">1</span> to <span class="number">10000</span>) println(<span class="string">"scala"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">s"耗时：<span class="subst">$&#123;new Concrete().getRuntime&#125;</span> ms"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="使用-trait-实现责任链模式"><a href="#使用-trait-实现责任链模式" class="headerlink" title="使用 trait 实现责任链模式"></a>使用 trait 实现责任链模式</h3><p>多个 trait 中出现了同一方法，且该方法最后都调用了 super.该方法名()，当类继承了这多个 trait 后就可以依次调用多个 trait 中的此同一个方法了，这就形成了一个调用链。</p>
<p>执行顺序：从右至左、先子类后父类。</p>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">trait</span> <span class="title">Handler</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">handle</span></span>(data:<span class="type">String</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">      println(<span class="string">"具体的处理数据...4"</span>)</span><br><span class="line">      println(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">trait</span> <span class="title">DataValid</span> <span class="keyword">extends</span> <span class="title">Handler</span></span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">handle</span></span>(data: <span class="type">String</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">      println(<span class="string">"验证数据 3"</span>)</span><br><span class="line">      <span class="keyword">super</span>.handle(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">trait</span> <span class="title">SignValid</span> <span class="keyword">extends</span> <span class="title">Handler</span></span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">handle</span></span>(data: <span class="type">String</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">      println(<span class="string">"验证签名 2"</span>)</span><br><span class="line">      <span class="keyword">super</span>.handle(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Payment</span> <span class="keyword">extends</span> <span class="title">DataValid</span> <span class="keyword">with</span> <span class="title">SignValid</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pay</span></span>(data:<span class="type">String</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">      println(<span class="string">"用户发起支付请求 1"</span>)</span><br><span class="line">      <span class="keyword">super</span>.handle(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> payment = <span class="keyword">new</span> <span class="type">Payment</span></span><br><span class="line">    payment.pay(<span class="string">"发起转账..5"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="trait-构造机制"><a href="#trait-构造机制" class="headerlink" title="trait 构造机制"></a>trait 构造机制</h3><p>每个特质只有一个无参构造器</p>
<p>遇到一个类继承另一个类以及多个trait的情况，创建该类实例时构造器执行顺序：</p>
<ul>
<li>执行父类构造器</li>
<li>从左到右依次执行 trait 的构造器</li>
<li>如果trait 有父 trait，先执行父 trait</li>
<li>如果多个 trait 有相同的父 trait，父 trait 构造器只初始化一次</li>
<li>执行子类构造器</li>
</ul>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">trait</span> <span class="title">A</span></span>&#123;</span><br><span class="line">    println(<span class="string">"A"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">trait</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;</span><br><span class="line">    println(<span class="string">"B"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">trait</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;</span><br><span class="line">    println(<span class="string">"C"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">D</span></span>&#123;</span><br><span class="line">    println(<span class="string">"D"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">E</span> <span class="keyword">extends</span> <span class="title">D</span>  <span class="keyword">with</span> <span class="title">B</span> <span class="keyword">with</span> <span class="title">C</span></span>&#123;</span><br><span class="line">    println(<span class="string">"E"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">new</span> <span class="type">E</span><span class="comment">//DABCE</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="trait-继承-class"><a href="#trait-继承-class" class="headerlink" title="trait 继承 class"></a>trait 继承 class</h3><p>trait 可以继承 class，会将所有的成员都继承下来。</p>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">printMsg</span></span>(): <span class="type">Unit</span> = println(<span class="string">"hello scala"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">trait</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">  </span></span><br><span class="line"><span class="class">  <span class="title">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">B</span></span></span><br><span class="line"><span class="class">  </span></span><br><span class="line"><span class="class">  <span class="title">def</span> <span class="title">main</span>(<span class="params">args: <span class="type">Array</span>[<span class="type">String</span>]</span>)</span>: <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">new</span> <span class="type">C</span>().printMsg()<span class="comment">//hello scala</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="案例：程序员"><a href="#案例：程序员" class="headerlink" title="案例：程序员"></a>案例：程序员</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Programmer</span></span>&#123;</span><br><span class="line">    <span class="keyword">val</span> name = <span class="string">""</span></span><br><span class="line">    <span class="keyword">val</span> age = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span></span>(): <span class="type">Unit</span> = println(<span class="string">"eat"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">code</span></span>()</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">JavaProgrammer</span> <span class="keyword">extends</span> <span class="title">Programmer</span></span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">code</span></span>(): <span class="type">Unit</span> = println(<span class="string">"精通 java"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">trait</span> <span class="title">BigData</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bigData</span></span>(): <span class="type">Unit</span> = println(<span class="string">"精通大数据"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">PartJavaProgrammer</span> <span class="keyword">extends</span> <span class="title">JavaProgrammer</span> <span class="keyword">with</span> <span class="title">BigData</span></span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">code</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">      <span class="keyword">super</span>.code()</span><br><span class="line">      bigData()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> javaProgrammer = <span class="keyword">new</span> <span class="type">PartJavaProgrammer</span></span><br><span class="line">    javaProgrammer.code()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="包"><a href="#包" class="headerlink" title="包"></a>包</h2><h3 id="包-1"><a href="#包-1" class="headerlink" title="包"></a>包</h3><p>包就是文件夹，用 package 修饰，可以区分重名类。</p>
<p><strong>作用域：</strong></p>
<p>子包可以直接访问父包中的内容。</p>
<p>上层访问下层内容时，可以通过导包(import)或者写全包名的形式实现。</p>
<p>如果上下层有相同的类，使用时采用就近原则（优先使用下层）。</p>
<p><strong>包对象：</strong></p>
<p>要定义在父包中，一般用于对包的功能进行补充、增强。</p>
<p><strong>可见性：</strong></p>
<p>通过访问权限修饰符 private、protected、默认来限定访问修饰符。</p>
<p>格式：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">访问修饰符[包名]</span><br></pre></td></tr></table></figure>
<p><strong>引入：</strong></p>
<p>Scala 默认引入了 java.lang 包的全部内容，scala 包以及 Predef 包的部分内容。</p>
<p>包的引入不限于Scala 文件的顶不，而是可以编写到任何需要使用的地方。</p>
<p>如果需要导入某个包中的所有类和特质，使用下划线 <code>_</code> 实现。</p>
<p>如果需要的时某个包的某几个类和特质，可以通过选取器 <code>{}</code>实现。</p>
<p>如果引入的多个包含有相同的类，可以通过重命名或隐藏解决。</p>
<p>重命名格式：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.&#123;<span class="type">HashSet</span> =&gt; <span class="type">JavaSet</span>&#125;</span><br></pre></td></tr></table></figure>
<p>隐藏格式：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.&#123;<span class="type">HashSet</span> =&gt; _,_&#125;<span class="comment">//引入util包下除了HashSet的类</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="样例类"><a href="#样例类" class="headerlink" title="样例类"></a>样例类</h3><p>样例类是一种特殊类，一般用于保存数据，在并发编程以及 Flink 等框架中会经常使用。</p>
<p>格式：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">样例类名</span>(<span class="params">[var/val] 成员变量名1:类型1...</span>)</span></span><br></pre></td></tr></table></figure>
<p>如果不写，变量默认修饰符是val。如果要实现某个成员变量值可以被修改，则需要手动添加var 修饰。</p>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params">val name:<span class="type">String</span>, var age:<span class="type">Int</span></span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  <span class="title">def</span> <span class="title">main</span>(<span class="params">args: <span class="type">Array</span>[<span class="type">String</span>]</span>)</span>: <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> person = <span class="keyword">new</span> <span class="type">Person</span>(name = <span class="string">"sjh"</span>, age = <span class="number">24</span>)</span><br><span class="line">    <span class="comment">//person.name = "" 不可修改</span></span><br><span class="line">    person.age = <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>样例类的默认方法</strong></p>
<ul>
<li><p>apply </p>
<p>可以快速使用类名创建对象，省略 new 关键字。</p>
</li>
<li><p>toString</p>
<p>可以在打印时直接打印该对象各个属性值。</p>
</li>
<li><p>equals</p>
<p>可以直接使用 == 直接比较属性值。</p>
</li>
<li><p>hashCode</p>
<p>同一个对象哈希值一定相同，不同对象哈希值一般不同。</p>
</li>
<li><p>copy</p>
<p>可以用来快速创建属性值相同的实例对象，还可以使用带名参数的形式给指定的成员变量赋值。</p>
</li>
<li><p>unapply</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params">var name:<span class="type">String</span>, var age:<span class="type">Int</span></span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  <span class="title">def</span> <span class="title">main</span>(<span class="params">args: <span class="type">Array</span>[<span class="type">String</span>]</span>)</span>: <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> person = <span class="type">Person</span>(name = <span class="string">"sjh"</span>, age = <span class="number">24</span>)</span><br><span class="line">    println(person)<span class="comment">//Person(sjh,24)</span></span><br><span class="line">    <span class="keyword">val</span> person1 = person.copy(age = <span class="number">20</span>)</span><br><span class="line">    println(person1)<span class="comment">//Person(sjh,20)</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="样例对象"><a href="#样例对象" class="headerlink" title="样例对象"></a>样例对象</h3><p>用 case 修饰的单例对象就叫样例对象，而且它没有主构造器，主要用在：</p>
<ul>
<li>枚举值</li>
<li>作为没有任何参数的消息传递</li>
</ul>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//特质 Sex,表示性别</span></span><br><span class="line">  <span class="class"><span class="keyword">trait</span> <span class="title">Sex</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  <span class="title">//样例对象，表示男，继承</span> <span class="title">Sex</span> <span class="title">特质</span></span></span><br><span class="line"><span class="class">  <span class="title">case</span> <span class="title">object</span> <span class="title">Male</span> <span class="keyword">extends</span> <span class="title">Sex</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  <span class="title">//样例对象，表示女，继承</span> <span class="title">Sex</span> <span class="title">特质</span></span></span><br><span class="line"><span class="class">  <span class="title">case</span> <span class="title">object</span> <span class="title">Female</span> <span class="keyword">extends</span> <span class="title">Sex</span></span></span><br><span class="line"><span class="class">  </span></span><br><span class="line"><span class="class">  <span class="title">//定义样例类</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class">  <span class="title">case</span> <span class="title">class</span> <span class="title">Person</span>(<span class="params">var name:<span class="type">String</span>, var sex:<span class="type">Sex</span></span>)</span>&#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> p = <span class="type">Person</span>(<span class="string">"sjh"</span>, <span class="type">Male</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="案例：计算器"><a href="#案例：计算器" class="headerlink" title="案例：计算器"></a>案例：计算器</h3><p>定义样例类 Calculate，并在其中添加四个方法分别用来计算两个整数的加减乘除操作。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Calculate</span>(<span class="params">a:<span class="type">Int</span>, b:<span class="type">Int</span></span>)</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span></span>(): <span class="type">Int</span> = a + b</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sub</span></span>(): <span class="type">Int</span> = a - b</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mul</span></span>(): <span class="type">Int</span> = a * b</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">div</span></span>(): <span class="type">Int</span> = a / b</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> res = <span class="type">Calculate</span>(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">    println(<span class="string">s"加法: <span class="subst">$&#123;res.add()&#125;</span>"</span>)<span class="comment">//2</span></span><br><span class="line">    println(<span class="string">s"减法: <span class="subst">$&#123;res.sub()&#125;</span>"</span>)<span class="comment">//0</span></span><br><span class="line">    println(<span class="string">s"乘法: <span class="subst">$&#123;res.mul()&#125;</span>"</span>)<span class="comment">//1</span></span><br><span class="line">    println(<span class="string">s"除法: <span class="subst">$&#123;res.div()&#125;</span>"</span>)<span class="comment">//1</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h2><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><h4 id="定长数组"><a href="#定长数组" class="headerlink" title="定长数组"></a><strong>定长数组</strong></h4><p><strong>语法：</strong></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 变量名 = <span class="keyword">new</span> <span class="type">Array</span>[元素类型](数组长度)</span><br><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 变量名 = <span class="keyword">new</span> <span class="type">Array</span>(元素<span class="number">1</span>, 元素<span class="number">2</span> ...)</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> arr = <span class="keyword">new</span> <span class="type">Array</span>[<span class="type">Int</span>](<span class="number">10</span>)</span><br><span class="line">    arr(<span class="number">0</span>) = <span class="number">1</span></span><br><span class="line">    println(arr(<span class="number">0</span>))<span class="comment">//1</span></span><br><span class="line">    println(arr.length)<span class="comment">//10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="变长数组"><a href="#变长数组" class="headerlink" title="变长数组"></a>变长数组</h4><p><strong>语法：</strong></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 变量名 = <span class="type">ArrayBuffer</span>[元素类型]</span><br><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 变量名 = <span class="type">ArrayBuffer</span>(元素<span class="number">1</span>, 元素<span class="number">2</span> ...)</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> arr = <span class="type">ArrayBuffer</span>[<span class="type">Int</span>]()</span><br><span class="line">    <span class="keyword">val</span> arr1 = <span class="type">ArrayBuffer</span>(<span class="string">"1"</span>, <span class="literal">true</span>, <span class="number">3</span>)</span><br><span class="line">    println(arr)<span class="comment">//ArrayBuffer()</span></span><br><span class="line">    println(arr1)<span class="comment">//ArrayBuffer(1, true, 3)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>增删改：</p>
<ul>
<li>使用 += 添加单个元素</li>
<li>使用 -= 删除单个元素</li>
<li>使用 ++= 追加一个数组</li>
<li>使用 –= 移除多个元素</li>
</ul>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> arr = <span class="type">ArrayBuffer</span>(<span class="string">"spark"</span>, <span class="string">"hadoop"</span>, <span class="string">"flink"</span>)</span><br><span class="line">    arr += <span class="string">"flume"</span></span><br><span class="line">    arr -= <span class="string">"spark"</span></span><br><span class="line">    arr ++= <span class="type">Array</span>(<span class="string">"hive"</span>, <span class="string">"sqoop"</span>)</span><br><span class="line">    arr --= <span class="type">Array</span>(<span class="string">"sqoop"</span>, <span class="string">"hadoop"</span>)</span><br><span class="line">    println(arr)<span class="comment">//ArrayBuffer(flink, flume, hive)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="遍历数组"><a href="#遍历数组" class="headerlink" title="遍历数组"></a>遍历数组</h4><p>通过索引</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i &lt;- <span class="number">0</span> to arr.length<span class="number">-1</span>)<span class="comment">//to包括右</span></span><br><span class="line">	println(arr(i))</span><br><span class="line"><span class="keyword">for</span>(i &lt;- arr.indices)</span><br><span class="line">	println(arr(i))</span><br><span class="line"><span class="keyword">for</span>(i &lt;- <span class="number">0</span> until(arr.length))<span class="comment">//until不包括右</span></span><br><span class="line">	println(arr(i))</span><br></pre></td></tr></table></figure>
<p>通过 for 循环</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (elem &lt;- arr)</span><br><span class="line">      println(elem)</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="数组常用算法"><a href="#数组常用算法" class="headerlink" title="数组常用算法"></a>数组常用算法</h4><p>sum ：求和</p>
<p>max：求最大值</p>
<p>min：求最小值</p>
<p>sorted：排序，返回一个新的数组</p>
<p>reverse：反转，返回一个新的数组</p>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> arr = <span class="type">Array</span>(<span class="number">4</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">    println(arr.sum)<span class="comment">//21</span></span><br><span class="line">    println(arr.max)<span class="comment">//6</span></span><br><span class="line">    println(arr.min)<span class="comment">//1</span></span><br><span class="line">    <span class="keyword">val</span> arr1 = arr.sorted</span><br><span class="line">    <span class="keyword">for</span> (elem &lt;- arr1)</span><br><span class="line">    print(elem)<span class="comment">//123456</span></span><br><span class="line">    println()</span><br><span class="line">    <span class="keyword">val</span> arr2 = arr1.reverse</span><br><span class="line">    <span class="keyword">for</span> (elem &lt;- arr2)</span><br><span class="line">    print(elem)<span class="comment">//654321</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h3><p>元组一般用来存储不同类型的数据，并且长度和元素都不可变。</p>
<p><strong>语法：</strong></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过小括号实现</span></span><br><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 元组 = (元素<span class="number">1</span>,元素<span class="number">2.</span>..)</span><br><span class="line"><span class="comment">//通过箭头(只适用于有2个元素的情况)</span></span><br><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 元组 = 元素<span class="number">1</span> -&gt; 元素<span class="number">2.</span>..</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> tuple = (<span class="string">"sjh"</span>, <span class="number">24</span>)</span><br><span class="line">    <span class="keyword">val</span> tuple1 = <span class="string">"sjh"</span> -&gt; <span class="number">24</span></span><br><span class="line">    println(tuple)<span class="comment">//(sjh,24)</span></span><br><span class="line">    println(tuple1)<span class="comment">//(sjh,24)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>访问元组中元素</strong></p>
<p>通过 <code>元组名._编号</code> 形式访问元组中元素，编号从 1 开始。或者通过 <code>元组名.productIterator</code> 获取迭代器遍历。</p>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> tuple = <span class="string">"sjh"</span> -&gt; <span class="number">24</span></span><br><span class="line">    <span class="comment">//方法1 通过编号</span></span><br><span class="line">    println(tuple._1)</span><br><span class="line">    <span class="comment">//方法2 获取迭代器</span></span><br><span class="line">    <span class="keyword">val</span> iterator = tuple.productIterator</span><br><span class="line">    <span class="keyword">for</span> (elem &lt;- iterator)</span><br><span class="line">    println(elem)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><h4 id="不可变列表"><a href="#不可变列表" class="headerlink" title="不可变列表"></a>不可变列表</h4><p>List 存储的数据有序、可重复，有序是指元素的存入和取出顺序是一致的。列表分为不可变列表和可变列表。</p>
<p>不可变列表指的是列表的元素、长度都不可变。</p>
<p><strong>语法：</strong></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 变量名 = <span class="type">List</span>(元素<span class="number">1</span>,元素<span class="number">2.</span>..)</span><br><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 变量名 = <span class="type">Nil</span></span><br><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 变量名 = 元素<span class="number">1</span> :: 元素<span class="number">2</span> :: <span class="type">Nil</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="可变列表"><a href="#可变列表" class="headerlink" title="可变列表"></a>可变列表</h4><p><strong>语法：</strong></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 变量名 = <span class="type">ListBuffer</span>[数据类型]()</span><br><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 变量名 = <span class="type">ListBuffer</span>(元素<span class="number">1</span>,元素<span class="number">2.</span>..)</span><br></pre></td></tr></table></figure>
<p>可变列表常用操作：</p>
<table>
<thead>
<tr>
<th>格式</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>列表名(索引)</td>
<td>根据索引获取元素</td>
</tr>
<tr>
<td>列表名(索引) = 值</td>
<td>修改元素值</td>
</tr>
<tr>
<td>+=</td>
<td>添加单个元素</td>
</tr>
<tr>
<td>++=</td>
<td>追加列表</td>
</tr>
<tr>
<td>-=</td>
<td>删除某个元素</td>
</tr>
<tr>
<td>–=</td>
<td>删除多个元素</td>
</tr>
<tr>
<td>toList</td>
<td>转为不可变列表</td>
</tr>
<tr>
<td>toArray</td>
<td>转为数组</td>
</tr>
</tbody>
</table>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> list = <span class="type">ListBuffer</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">    println(list(<span class="number">0</span>))</span><br><span class="line">    list += <span class="number">4</span></span><br><span class="line">    list ++= <span class="type">List</span>(<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>)</span><br><span class="line">    list -= <span class="number">7</span></span><br><span class="line">    list --= <span class="type">List</span>(<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">    <span class="keyword">val</span> list1 = list.toList</span><br><span class="line">    <span class="keyword">val</span> array = list.toArray</span><br><span class="line">    println(list1)<span class="comment">//List(1, 2, 5, 6)</span></span><br><span class="line">    <span class="keyword">for</span> (elem &lt;- array)  print(elem)<span class="comment">//1256</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="列表常用操作"><a href="#列表常用操作" class="headerlink" title="列表常用操作"></a>列表常用操作</h4><table>
<thead>
<tr>
<th>格式</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>distinct</td>
<td>去重</td>
</tr>
<tr>
<td>isEmpty</td>
<td>判断是否为空</td>
</tr>
<tr>
<td>++</td>
<td>拼接两个列表</td>
</tr>
<tr>
<td>head</td>
<td>返回第一个元素</td>
</tr>
<tr>
<td>tail</td>
<td>返回除了第一个元素之外的其他元素</td>
</tr>
<tr>
<td>reverse</td>
<td>反转并返回新列表</td>
</tr>
<tr>
<td>take</td>
<td>获取前缀元素（自定义个数）</td>
</tr>
<tr>
<td>drop</td>
<td>获取后缀元素（自定义个数）</td>
</tr>
<tr>
<td>flatten</td>
<td>扁平化操作，返回新列表</td>
</tr>
<tr>
<td>zip</td>
<td>拉链操作，合并列表</td>
</tr>
<tr>
<td>unzip</td>
<td>拉开操作，拆分列表</td>
</tr>
<tr>
<td>toString</td>
<td>转换默认字符串</td>
</tr>
<tr>
<td>mkString</td>
<td>转换指定字符串</td>
</tr>
<tr>
<td>union</td>
<td>获取两个列表并集元素，返回新列表</td>
</tr>
<tr>
<td>intersect</td>
<td>获取两个列表交集元素，返回新列表</td>
</tr>
<tr>
<td>diff</td>
<td>获取两个列表差集元素，返回新列表</td>
</tr>
</tbody>
</table>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">    print(list.isEmpty)<span class="comment">//false</span></span><br><span class="line">    <span class="keyword">val</span> list2 = <span class="type">List</span>(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">    <span class="keyword">val</span> list3 = list ++ list2</span><br><span class="line">    println(list3)<span class="comment">//List(1, 2, 3, 4, 4, 5, 6)</span></span><br><span class="line">    println(list3.head)<span class="comment">//1</span></span><br><span class="line">    println(list3.tail)<span class="comment">//List(2, 3, 4, 4, 5, 6)</span></span><br><span class="line">    <span class="comment">//前3个是前缀</span></span><br><span class="line">    println(list3.take(<span class="number">3</span>))<span class="comment">//List(1, 2, 3)</span></span><br><span class="line">    <span class="comment">//前3个是前缀，获取后缀</span></span><br><span class="line">    println(list3.drop(<span class="number">3</span>))<span class="comment">//List(4, 4, 5, 6)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>示例：扁平化操作</p>
<p>将嵌套列表（每个元素都是列表）的所有具体元素单独放到一个新的列表</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> list1 = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">val</span> list2 = <span class="type">List</span>(<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">    <span class="keyword">val</span> list = <span class="type">List</span>(list1, list2, <span class="type">List</span>(<span class="number">5</span>))</span><br><span class="line">    <span class="keyword">val</span> flatten = list.flatten</span><br><span class="line">    println(list)<span class="comment">//List(List(1, 2), List(3, 4), List(5))</span></span><br><span class="line">    println(flatten)<span class="comment">//List(1, 2, 3, 4, 5)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>示例：拉链与拉开</p>
<p>拉链：将两个列表组合成一个元素为元组的列表</p>
<p>拉开：将一个包含元组的列表，拆解成包含两个列表的元组</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> names = <span class="type">List</span>(<span class="string">"sjh"</span>, <span class="string">"a"</span>, <span class="string">"bb"</span>)</span><br><span class="line">  <span class="keyword">val</span> ages = <span class="type">List</span>(<span class="number">24</span>, <span class="number">1</span>, <span class="number">10</span>)</span><br><span class="line">  <span class="keyword">val</span> list1 = names.zip(ages)</span><br><span class="line">  println(list1)<span class="comment">//List((sjh,24), (a,1), (bb,10))</span></span><br><span class="line">  <span class="keyword">val</span> tuple1 = list1.unzip</span><br><span class="line">  println(tuple1)<span class="comment">//(List(sjh, a, bb),List(24, 1, 10))</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>示例：转换字符串</p>
<p>mkString 以指定符号分割元素</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">  println(list.toString())<span class="comment">//List(1, 2, 3, 4)</span></span><br><span class="line">  println(list.mkString(<span class="string">":"</span>))<span class="comment">//1:2:3:4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="集"><a href="#集" class="headerlink" title="集"></a>集</h3><h4 id="不可变集"><a href="#不可变集" class="headerlink" title="不可变集"></a>不可变集</h4><p>特点：唯一、无序</p>
<p>语法：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建空的不可变集</span></span><br><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 变量名 = <span class="type">Set</span>[类型]() </span><br><span class="line"><span class="comment">//指定元素</span></span><br><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> 变量名 = <span class="type">Set</span>(元素<span class="number">1</span>, 元素<span class="number">2.</span>..)</span><br></pre></td></tr></table></figure>
<p>常用操作：</p>
<ul>
<li>size 获取大小</li>
<li>遍历操作和数组一致</li>
<li><code>+</code> 添加元素，生成一个新的 Set</li>
<li><code>++</code> 拼接集或列表，生成一个新的 Set</li>
<li><code>-</code> 删除一个元素，生成一个新的 Set</li>
<li><code>--</code> 删除多个元素，，生成一个新的 Set</li>
</ul>
<hr>
<h4 id="可变集"><a href="#可变集" class="headerlink" title="可变集"></a>可变集</h4><p>导入包</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scala.collection.mutable.<span class="type">Set</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="映射"><a href="#映射" class="headerlink" title="映射"></a>映射</h3><h4 id="不可变-Map"><a href="#不可变-Map" class="headerlink" title="不可变 Map"></a>不可变 Map</h4><p>语法：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过箭头</span></span><br><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> map = <span class="type">Map</span>(k1-&gt;v1, k2-&gt;v2...)</span><br><span class="line"><span class="comment">//通过小括号</span></span><br><span class="line"><span class="keyword">val</span>/<span class="keyword">var</span> map = <span class="type">Map</span>((k1,v1), (k2,v2)...)</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="可变-Map"><a href="#可变-Map" class="headerlink" title="可变 Map"></a>可变 Map</h4><p>导入包</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scala.collection.mutable.<span class="type">Map</span></span><br></pre></td></tr></table></figure>
<hr>
<p>基本操作：</p>
<ul>
<li>map(key) 获取键对应值，不存在返回None</li>
<li>map.keys 获取所有键</li>
<li>map.values 获取所有值</li>
<li>遍历 通过普通for实现</li>
<li>getOrElse 根据键获取值，不存在返回指定默认值</li>
<li><code>+</code> 增加键值对，生成一个新的 Map。如果是可变 Map，直接使用 <code>+=</code> 或 <code>++=</code> 。</li>
<li><code>-</code> 删除键值对，生成一个新的 Map。如果是可变 Map，直接使用 <code>-=</code> 或 <code>--=</code> 。</li>
</ul>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> map = <span class="type">Map</span>(<span class="string">"sjh"</span> -&gt; <span class="number">24</span>, <span class="string">"ax"</span> -&gt; <span class="number">10</span>)</span><br><span class="line">  println(map.keys)<span class="comment">//Set(ax, sjh)</span></span><br><span class="line">  println(map.values)<span class="comment">//HashMap(10, 24)</span></span><br><span class="line">  <span class="keyword">for</span> (elem &lt;- map) &#123; println(elem)&#125;<span class="comment">//(ax,10) (sjh,24)</span></span><br><span class="line">  println(map.getOrElse(<span class="string">"sjh"</span>, <span class="number">1</span>))<span class="comment">//24</span></span><br><span class="line">  map += <span class="string">"abc"</span> -&gt; <span class="number">10</span></span><br><span class="line">  println(map)<span class="comment">//Map(abc -&gt; 10, ax -&gt; 10, sjh -&gt; 24)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h3><p>使用 iterator 从集合获取迭代器，迭代器的两个方法：</p>
<p>hasNext 判断是否有下一个元素</p>
<p>next 返回下一个元素，没有会抛出异常</p>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">    <span class="keyword">val</span> iterator = list.iterator</span><br><span class="line">    <span class="keyword">while</span> (iterator.hasNext)</span><br><span class="line">    print(iterator.next())<span class="comment">//12345</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="函数式编程"><a href="#函数式编程" class="headerlink" title="函数式编程"></a>函数式编程</h3><p>函数式编程指 方法的参数列表可以接收函数对象。</p>
<table>
<thead>
<tr>
<th>函数名</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>foreach</td>
<td>遍历集合</td>
</tr>
<tr>
<td>map</td>
<td>转换集合</td>
</tr>
<tr>
<td>flatmap</td>
<td>扁平化操作</td>
</tr>
<tr>
<td>sorted</td>
<td>默认排序</td>
</tr>
<tr>
<td>sortBy</td>
<td>按照指定字段排序</td>
</tr>
<tr>
<td>sortWith</td>
<td>自定义排序</td>
</tr>
<tr>
<td>groupBy</td>
<td>按指定条件分组</td>
</tr>
<tr>
<td>reduce</td>
<td>聚合计算</td>
</tr>
<tr>
<td>fold</td>
<td>折叠计算</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a>foreach</h4><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">  <span class="comment">//函数格式 (函数参数列表) =&gt; &#123;函数体&#125;</span></span><br><span class="line">  list.foreach((x:<span class="type">Int</span>) =&gt; &#123;println(x)&#125;)</span><br><span class="line">  <span class="comment">//简写格式1 通过类型推断省略参数数据类型</span></span><br><span class="line">  list.foreach(x =&gt; println(x))</span><br><span class="line">  <span class="comment">//简写格式2 函数参数只在函数体出现一次，且函数体没有涉及复杂使用，可以使用下划线简化</span></span><br><span class="line">  list.foreach(println(_))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="map"><a href="#map" class="headerlink" title="map"></a>map</h4><p>将一种类型转换为另一种类型，例如将 Int 列表转为 String 列表</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">    <span class="comment">//将数字转换为对应个数的 *</span></span><br><span class="line">    <span class="keyword">val</span> list2 = list.map((x:<span class="type">Int</span>) =&gt; &#123;<span class="string">"*"</span> * x&#125;)</span><br><span class="line">    println(list2)<span class="comment">//List(*, **, ***, ****)</span></span><br><span class="line">    <span class="comment">//根据类型推断简化</span></span><br><span class="line">    <span class="keyword">val</span> list3 = list.map(x =&gt; <span class="string">"*"</span> * x)</span><br><span class="line">    println(list3)<span class="comment">//List(*, **, ***, ****)</span></span><br><span class="line">    <span class="comment">//下划线</span></span><br><span class="line">    <span class="keyword">val</span> list4 = list.map(<span class="string">"*"</span> * _)</span><br><span class="line">    println(list4)<span class="comment">//List(*, **, ***, ****)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="flatMap"><a href="#flatMap" class="headerlink" title="flatMap"></a>flatMap</h4><p>可以理解为先进行 map ，再进行 flatten 操作。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> list = <span class="type">List</span>(<span class="string">"hadoop hive spark flink"</span>, <span class="string">"kudu hbase storm"</span>)</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">val</span> list2 =list.map(_.split(<span class="string">" "</span>)).flatten</span><br><span class="line">  println(list2)<span class="comment">//List(hadoop, hive, spark, flink, kudu, hbase, storm)</span></span><br><span class="line">    </span><br><span class="line">  <span class="keyword">val</span> list3 =list.flatMap(_.split(<span class="string">" "</span>))</span><br><span class="line">  println(list2)<span class="comment">//List(hadoop, hive, spark, flink, kudu, hbase, storm)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h4><p>过滤出符合一定条件的元素，示例，筛选偶数：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> list = (<span class="number">1</span> to <span class="number">6</span>).toList</span><br><span class="line">  println(list.filter(_ % <span class="number">2</span> == <span class="number">0</span>))<span class="comment">//List(2, 4, 6)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h4><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//升序排序</span></span><br><span class="line">    <span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">9</span>, <span class="number">8</span>)</span><br><span class="line">    println(list.sorted)<span class="comment">//List(1, 2, 3, 8, 9)</span></span><br><span class="line">    <span class="comment">//指定字段排序</span></span><br><span class="line">    <span class="keyword">val</span> list2 = <span class="type">List</span>(<span class="string">"01 hadoop"</span>, <span class="string">"02 flume"</span>, <span class="string">"03 hive"</span>)</span><br><span class="line">    println(list2.sortBy(_.split(<span class="string">" "</span>)(<span class="number">1</span>)))<span class="comment">//List(02 flume, 01 hadoop, 03 hive)</span></span><br><span class="line">    <span class="comment">//自定义排序实现降序</span></span><br><span class="line">    <span class="keyword">val</span> list3 = <span class="type">List</span>(<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">    <span class="comment">//第一个下划线表示前面的元素，第二个下划线表示后面的元素</span></span><br><span class="line">    println(list3.sortWith(_ &gt; _))<span class="comment">//List(6, 5, 4, 3, 2, 1)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="group-by"><a href="#group-by" class="headerlink" title="group by"></a>group by</h4><p>将数据按指定条件进行分组，示例，按照性别分组：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> list = <span class="type">List</span>(<span class="string">"sjh"</span>-&gt;<span class="string">"男"</span>,<span class="string">"ssf"</span>-&gt;<span class="string">"女"</span>,<span class="string">"ka"</span>-&gt;<span class="string">"男"</span>)</span><br><span class="line">    <span class="comment">//按照元素第二个元素分组</span></span><br><span class="line">    <span class="comment">//val map = list.groupBy(x =&gt; x._2)</span></span><br><span class="line">    <span class="keyword">val</span> map = list.groupBy(_._2)</span><br><span class="line">    println(map)<span class="comment">//Map(男 -&gt; List((sjh,男), (ka,男)), 女 -&gt; List((ssf,女)))</span></span><br><span class="line">    <span class="comment">//统计不同性别人数</span></span><br><span class="line">    <span class="keyword">val</span> map2 = map.map(x =&gt; x._1 -&gt; x._2.length)<span class="comment">//不能用下划线简化，因为x在后面出现了2次</span></span><br><span class="line">    println(map2)<span class="comment">//Map(男 -&gt; 2, 女 -&gt; 1)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="reduce-和-fold"><a href="#reduce-和-fold" class="headerlink" title="reduce 和 fold"></a>reduce 和 fold</h4><p>示例：计算1-10的和，reduce 相当于 reduceLeft，如果想从右到左计算使用 reduceRight</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> list = (<span class="number">1</span> to <span class="number">10</span>).toList</span><br><span class="line">    <span class="comment">//x表示聚合操作的结果，y表示下一个元素</span></span><br><span class="line">    <span class="keyword">var</span> i = list.reduce((x, y) =&gt; x + y)</span><br><span class="line">    <span class="comment">//简化</span></span><br><span class="line">    i = list.reduce(_ + _)</span><br><span class="line">    println(i)<span class="comment">//55</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>fold 和 reduce 很像，只是 fold 多了一个指定初始化值参数</p>
<p>fold 相当于 foldLeft，如果想从右到左计算使用 foldRight</p>
<p>示例：定义一个列表包括1-10，假设初始化值100，计算所有元素和</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> list = (<span class="number">1</span> to <span class="number">10</span>).toList</span><br><span class="line">    <span class="comment">//x表示聚合操作的结果，y表示下一个元素</span></span><br><span class="line">    <span class="keyword">val</span> i = list.fold(<span class="number">100</span>)(_ + _)</span><br><span class="line">    println(i)<span class="comment">//155</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="案例：学生成绩单"><a href="#案例：学生成绩单" class="headerlink" title="案例：学生成绩单"></a>案例：学生成绩单</h3><p>定义列表，记录学生成绩，格式为：姓名，语文成绩，数学成绩，英语成绩。</p>
<p>获取所有语文成绩在60分以上得同学信息。</p>
<p>获取所有学生的总成绩。</p>
<p>按照总成绩降序排列。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> list = <span class="type">List</span>((<span class="string">"a"</span>, <span class="number">37</span>, <span class="number">90</span> ,<span class="number">100</span>), (<span class="string">"b"</span>, <span class="number">90</span>, <span class="number">73</span> ,<span class="number">80</span>), (<span class="string">"c"</span>, <span class="number">60</span>, <span class="number">90</span>, <span class="number">76</span>), (<span class="string">"d"</span>, <span class="number">59</span>, <span class="number">21</span>, <span class="number">72</span>), (<span class="string">"e"</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>))</span><br><span class="line">    <span class="comment">//获取语文成绩60分以上学生信息</span></span><br><span class="line">    <span class="keyword">val</span> list1 = list.filter(_._2 &gt; <span class="number">60</span>)</span><br><span class="line">    println(list1)<span class="comment">//List((b,90,73,80), (e,100,100,100))</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取所有学生总成绩</span></span><br><span class="line">    <span class="keyword">val</span> list2 = list.map(x =&gt; x._1 -&gt; (x._2 + x._3 + x._4))</span><br><span class="line">    println(list2)<span class="comment">//List((a,227), (b,243), (c,226), (d,152), (e,300))</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//按照总成绩降序排列</span></span><br><span class="line">    <span class="keyword">val</span> list3 = list2.sortWith(_._2 &gt; _._2)</span><br><span class="line">    println(list3)<span class="comment">//List((e,300), (b,243), (a,227), (c,226), (d,152))</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="模式匹配、偏函数、异常、提取器"><a href="#模式匹配、偏函数、异常、提取器" class="headerlink" title="模式匹配、偏函数、异常、提取器"></a>模式匹配、偏函数、异常、提取器</h2><h3 id="模式匹配"><a href="#模式匹配" class="headerlink" title="模式匹配"></a>模式匹配</h3><p>作用：判断固定值、类型查询、快速获取数据</p>
<h4 id="简单模式匹配"><a href="#简单模式匹配" class="headerlink" title="简单模式匹配"></a>简单模式匹配</h4><p>格式：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">变量 <span class="keyword">match</span>&#123;</span><br><span class="line">	<span class="keyword">case</span> 常量<span class="number">1</span> =&gt; 表达式<span class="number">1</span></span><br><span class="line">	<span class="keyword">case</span> 常量<span class="number">2</span> =&gt; 表达式<span class="number">2</span></span><br><span class="line">	<span class="keyword">case</span> 常量<span class="number">3</span> =&gt; 表达式<span class="number">3</span></span><br><span class="line">	<span class="keyword">case</span> _ =&gt; 表达式<span class="number">4</span> <span class="comment">//默认项</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">"输入一个单词"</span>)</span><br><span class="line">    <span class="keyword">val</span> word = <span class="type">StdIn</span>.readLine()</span><br><span class="line">    word <span class="keyword">match</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"hadoop"</span> =&gt; println(<span class="string">"大数据分布式存储和计算框架"</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"zookeeper"</span> =&gt; println(<span class="string">"大数据分布式协调服务框架"</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"spark"</span> =&gt; println(<span class="string">"大数据分布式内存计算框架"</span>)</span><br><span class="line">        <span class="keyword">case</span> _ =&gt; println(<span class="string">"未匹配"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="匹配类型"><a href="#匹配类型" class="headerlink" title="匹配类型"></a>匹配类型</h4><p>格式：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">对象名 <span class="keyword">match</span>&#123;</span><br><span class="line">	<span class="keyword">case</span> 变量名<span class="number">1</span>:类型<span class="number">1</span> =&gt; 表达式<span class="number">1</span></span><br><span class="line">	<span class="keyword">case</span> 变量名<span class="number">2</span>:类型<span class="number">2</span> =&gt; 表达式<span class="number">2</span></span><br><span class="line">	<span class="keyword">case</span> _:类型<span class="number">3</span> =&gt; 表达式<span class="number">3</span><span class="comment">//表达式没用到变量名可以使用下划线代替</span></span><br><span class="line">	<span class="keyword">case</span> _ =&gt; 表达式<span class="number">4</span> <span class="comment">//默认项</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> a:<span class="type">Any</span> = <span class="string">"hadoop"</span></span><br><span class="line">    a <span class="keyword">match</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> x:<span class="type">String</span> =&gt; println(<span class="string">s"<span class="subst">$&#123;x&#125;</span>是字符串"</span>)</span><br><span class="line">        <span class="keyword">case</span> x:<span class="type">Int</span> =&gt; println(<span class="string">s"<span class="subst">$&#123;x&#125;</span>是数字"</span>)</span><br><span class="line">        <span class="keyword">case</span> _ =&gt; println(<span class="string">"未匹配"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="守卫"><a href="#守卫" class="headerlink" title="守卫"></a>守卫</h4><p>守卫指在 case 中添加 if 条件判断，这样可以让代码更简洁。</p>
<p>格式：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">变量 <span class="keyword">match</span>&#123;</span><br><span class="line">	<span class="keyword">case</span> 变量名 <span class="keyword">if</span> 条件<span class="number">1</span> =&gt; 表达式<span class="number">1</span></span><br><span class="line">	<span class="keyword">case</span> 变量名 <span class="keyword">if</span> 条件<span class="number">2</span> =&gt; 表达式<span class="number">2</span></span><br><span class="line">	<span class="keyword">case</span> 变量名 <span class="keyword">if</span> 条件<span class="number">3</span>=&gt; 表达式<span class="number">3</span></span><br><span class="line">	<span class="keyword">case</span> _ =&gt; 表达式<span class="number">4</span> <span class="comment">//默认项</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> a = <span class="type">StdIn</span>.readInt()</span><br><span class="line">  a <span class="keyword">match</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> x <span class="keyword">if</span> x &gt; <span class="number">0</span> =&gt; println(<span class="string">"正数"</span>)</span><br><span class="line">    <span class="keyword">case</span> x <span class="keyword">if</span> x &lt; <span class="number">0</span> =&gt; println(<span class="string">"负数"</span>)</span><br><span class="line">    <span class="keyword">case</span> _ =&gt; println(<span class="string">"是0"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="匹配样例类"><a href="#匹配样例类" class="headerlink" title="匹配样例类"></a>匹配样例类</h4><p>要匹配的对象必须声明为 Any。</p>
<p>格式：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">对象名 <span class="keyword">match</span>&#123;</span><br><span class="line">	<span class="keyword">case</span> 样例类型<span class="number">1</span>(字段<span class="number">1</span>, 字段<span class="number">2.</span>.) =&gt; 表达式<span class="number">1</span></span><br><span class="line">	<span class="keyword">case</span> 样例类型<span class="number">2</span>(字段<span class="number">1</span>, 字段<span class="number">2.</span>.) =&gt; 表达式<span class="number">2</span></span><br><span class="line">	<span class="keyword">case</span> 样例类型<span class="number">3</span>(字段<span class="number">1</span>, 字段<span class="number">2.</span>.) =&gt; 表达式<span class="number">3</span></span><br><span class="line">	<span class="keyword">case</span> _ =&gt; 表达式<span class="number">4</span> <span class="comment">//默认项</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span>(<span class="params">name:<span class="type">String</span>, age:<span class="type">Int</span></span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  <span class="title">case</span> <span class="title">class</span> <span class="title">Order</span>(<span class="params">id:<span class="type">Int</span></span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  <span class="title">def</span> <span class="title">main</span>(<span class="params">args: <span class="type">Array</span>[<span class="type">String</span>]</span>)</span>: <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> a:<span class="type">Any</span> = <span class="type">Customer</span>(<span class="string">"sjh"</span>, <span class="number">20</span>)</span><br><span class="line">    a <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="type">Customer</span> =&gt; println(<span class="string">"是customer"</span>)</span><br><span class="line">      <span class="keyword">case</span> <span class="type">Order</span> =&gt; println(<span class="string">"是order"</span>)</span><br><span class="line">      <span class="keyword">case</span> _ =&gt; println(<span class="string">"未匹配"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="匹配集合"><a href="#匹配集合" class="headerlink" title="匹配集合"></a>匹配集合</h4><ul>
<li><p>匹配数组</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="comment">//定义三个数组</span></span><br><span class="line">  <span class="keyword">val</span> arr1 = <span class="type">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">  <span class="keyword">val</span> arr2 = <span class="type">Array</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">val</span> arr3 = <span class="type">Array</span>(<span class="number">0</span> , <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">  arr1 <span class="keyword">match</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Array</span>(<span class="number">1</span>, _, _) =&gt; println(<span class="string">"长度为3，首元素为1"</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Array</span>(<span class="number">0</span>) =&gt; println(<span class="string">"长度为1，元素0"</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Array</span>(<span class="number">0</span>, _*) =&gt; println(<span class="string">"首元素0，其余任意"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>匹配列表</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//定义三个列表</span></span><br><span class="line">    <span class="keyword">val</span> list1 = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">    <span class="keyword">val</span> list2 = <span class="type">List</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">val</span> list3 = <span class="type">List</span>(<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">    list3 <span class="keyword">match</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="type">List</span>(<span class="number">1</span>, _, _) =&gt; println(<span class="string">"长度为3，首元素为1"</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="type">List</span>(<span class="number">0</span>) =&gt; println(<span class="string">"长度为1，元素0"</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="type">List</span>(<span class="number">0</span>, _*) =&gt; println(<span class="string">"首元素0，其余任意"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//等价于</span></span><br><span class="line">    list2 <span class="keyword">match</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span> :: _ :: _ ::<span class="type">Nil</span> =&gt; println(<span class="string">"长度为3，首元素为1"</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span> :: <span class="type">Nil</span> =&gt; println(<span class="string">"长度为1，元素0"</span>)</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span> :: _ =&gt; println(<span class="string">"首元素0，其余任意"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>匹配元组</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//定义三个元组</span></span><br><span class="line">    <span class="keyword">val</span> a = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">    <span class="keyword">val</span> b = (<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">    <span class="keyword">val</span> c = (<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">    a <span class="keyword">match</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> (<span class="number">1</span>, _, _) =&gt; println(<span class="string">"长度为3，首元素为1"</span>)</span><br><span class="line">        <span class="keyword">case</span> (_, _, <span class="number">5</span>) =&gt; println(<span class="string">"长度为3，尾元素为5"</span>)</span><br><span class="line">        <span class="keyword">case</span> _ =&gt; println(<span class="string">"不匹配"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h4 id="变量声明中的模式匹配"><a href="#变量声明中的模式匹配" class="headerlink" title="变量声明中的模式匹配"></a>变量声明中的模式匹配</h4><p>在定义变量时，可以使用模式匹配快速获取数据</p>
<p>生成包含 0-10的数字，使用模式匹配分别获取第2、3、4个元素</p>
<p>生成包含 0-10的列表，使用模式匹配分别获取第1、2个元素</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> arr = (<span class="number">0</span> to <span class="number">10</span>).toArray</span><br><span class="line">    <span class="keyword">val</span> <span class="type">Array</span>(_, x, y, z, _*) = arr</span><br><span class="line">    println(x, y, z)<span class="comment">//(1,2,3)</span></span><br><span class="line">    <span class="keyword">val</span> list = (<span class="number">0</span> to <span class="number">10</span>).toList</span><br><span class="line">    <span class="keyword">val</span> <span class="type">List</span>(a, b, _*) = list</span><br><span class="line">    <span class="keyword">val</span> c :: d ::tail = list</span><br><span class="line">    println(a, b)<span class="comment">//(0,1)</span></span><br><span class="line">    println(c, d)<span class="comment">//(0,1)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="匹配-for-表达式"><a href="#匹配-for-表达式" class="headerlink" title="匹配 for 表达式"></a>匹配 for 表达式</h4><p>定义变量记录学生姓名和年龄，获取所有年龄为20的学生信息：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> map = <span class="type">Map</span>(<span class="string">"sjh"</span> -&gt; <span class="number">20</span>, <span class="string">"a"</span> -&gt; <span class="number">21</span>, <span class="string">"asx"</span> -&gt; <span class="number">20</span>)</span><br><span class="line">  <span class="comment">//方式一 if</span></span><br><span class="line">  <span class="keyword">for</span>((k, v) &lt;- map <span class="keyword">if</span> v == <span class="number">20</span>)</span><br><span class="line">    println(k, v)</span><br><span class="line">  <span class="comment">//方式二 固定值</span></span><br><span class="line">  <span class="keyword">for</span>((k, <span class="number">20</span>) &lt;- map)</span><br><span class="line">    println(k, <span class="number">20</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Option-类型"><a href="#Option-类型" class="headerlink" title="Option 类型"></a>Option 类型</h3><p>用来避免空指针异常，具体值使用 Some(x)，空值使用 None</p>
<p>示例：定义一个两数相除的方法，使用 Option 类型封装结果</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">divide</span></span>(a:<span class="type">Int</span>, b:<span class="type">Int</span>): <span class="type">Option</span>[<span class="type">Int</span>] = &#123;</span><br><span class="line">    <span class="keyword">if</span>(b == <span class="number">0</span>)</span><br><span class="line">      <span class="type">None</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="type">Some</span>(a / b)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    divide(<span class="number">10</span>, <span class="number">0</span>) <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="type">None</span> =&gt; println(<span class="string">"除数不能为 0"</span>)</span><br><span class="line">      <span class="keyword">case</span> <span class="type">Some</span>(x) =&gt; println(<span class="string">s"结果为<span class="subst">$x</span>"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="偏函数"><a href="#偏函数" class="headerlink" title="偏函数"></a>偏函数</h3><p>可以配合集合的函数式编程简化代码。</p>
<p>偏函数是指 被包在花括号内没有 match 的一组 case语句。</p>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> pf:<span class="type">PartialFunction</span>[<span class="type">Int</span>, <span class="type">String</span>] = &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span> =&gt; <span class="string">"一"</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span> =&gt; <span class="string">"二"</span></span><br><span class="line">        <span class="keyword">case</span> _ =&gt; <span class="string">"未匹配"</span></span><br><span class="line">    &#125;</span><br><span class="line">    println(pf(<span class="number">1</span>))<span class="comment">//一</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>偏函数可结合 map 函数使用。</p>
<p>定义一个列表包含1-10的数字，将1-3的数字转为[1-3]，4-8的数字转为[4-8]，其余数字转为(8-*]</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> list = (<span class="number">1</span> to <span class="number">10</span>).toList</span><br><span class="line">  <span class="keyword">val</span> list1 = list.map &#123;</span><br><span class="line">    <span class="keyword">case</span> x <span class="keyword">if</span> x &gt;= <span class="number">1</span> &amp;&amp; x &lt;= <span class="number">3</span> =&gt; <span class="string">"[1-3]"</span></span><br><span class="line">    <span class="keyword">case</span> x <span class="keyword">if</span> x &gt;= <span class="number">4</span> &amp;&amp; x &lt;= <span class="number">8</span> =&gt; <span class="string">"[4-8]"</span></span><br><span class="line">    <span class="keyword">case</span> _ =&gt; <span class="string">"(8,*]"</span></span><br><span class="line">  &#125;</span><br><span class="line">  println(list1)<span class="comment">//List([1-3], [1-3], [1-3], [4-8], [4-8], [4-8], [4-8], [4-8], (8,*], (8,*])</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><p>Scala 提供了 Regex 类定义正则表达式</p>
<p>要构造一个 Regex 对象直接使用 String 类的 r 方法即可</p>
<p>建议使用三个双引号表示正则表达式，不需要对其中的反斜杠转义。</p>
<p>格式：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> 正则对象名 = <span class="string">""</span><span class="string">"具体正则表达式"</span><span class="string">""</span>.r</span><br></pre></td></tr></table></figure>
<p>示例：校验邮箱</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> regex = <span class="string">""</span><span class="string">".+@.+\.com"</span><span class="string">""</span>.r</span><br><span class="line">    <span class="keyword">val</span> email = <span class="string">"sad@qq.com"</span></span><br><span class="line">    <span class="keyword">if</span>(regex.findAllMatchIn(email).nonEmpty)</span><br><span class="line">    println(<span class="string">"合法"</span>)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    println(<span class="string">"不合法"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>示例：过滤出不合法的邮箱</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> regex = <span class="string">""</span><span class="string">".+@.+\.com"</span><span class="string">""</span>.r</span><br><span class="line">  <span class="keyword">val</span> emailList = <span class="type">List</span>(<span class="string">"sad@.com"</span>, <span class="string">"asda@qq.com"</span>, <span class="string">"fuck@,cn"</span>)</span><br><span class="line">  <span class="keyword">val</span> list = emailList.filter((x) =&gt; regex.findAllMatchIn(x).isEmpty)</span><br><span class="line">  println(list)<span class="comment">//List(sad@.com, fuck@,cn)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>示例：获取邮箱运营商</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//括号可以充当分组角色，用来提取其中内容</span></span><br><span class="line">    <span class="keyword">val</span> regex = <span class="string">""</span><span class="string">".+@(.+)\.com"</span><span class="string">""</span>.r</span><br><span class="line">    <span class="keyword">val</span> emailList = <span class="type">List</span>(<span class="string">"sad@.com"</span>, <span class="string">"asda@qq.com"</span>, <span class="string">"fuck@,cn"</span>)</span><br><span class="line">    <span class="keyword">val</span> list = emailList.map&#123;</span><br><span class="line">        <span class="keyword">case</span> x @ regex(company) =&gt; x -&gt; company</span><br><span class="line">        <span class="keyword">case</span> x =&gt; x -&gt; <span class="string">"未匹配"</span></span><br><span class="line">    &#125;</span><br><span class="line">    println(list)<span class="comment">//List((sad@.com,未匹配), (asda@qq.com,qq), (fuck@,cn,未匹配))</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h3><ul>
<li><p>捕获异常</p>
<p>该方式处理完异常，程序会继续执行</p>
</li>
<li><p>抛出异常</p>
<p>该方式处理完异常，程序会终止执行</p>
</li>
</ul>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//捕获异常</span></span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="keyword">val</span> i = <span class="number">10</span> / <span class="number">0</span></span><br><span class="line">    &#125;<span class="keyword">catch</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> _:<span class="type">ArithmeticException</span> =&gt; println(<span class="string">"算术异常"</span>)</span><br><span class="line">        <span class="keyword">case</span> _ =&gt; println(<span class="string">"其他异常"</span>)</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        println(<span class="string">"一般用来释放资源"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//抛出异常</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">Exception</span>(<span class="string">"发生异常"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="提取器"><a href="#提取器" class="headerlink" title="提取器"></a>提取器</h3><p>一个类如果要支持模式匹配，必须要实现一个提取器。</p>
<p>提取器就是指 unapply 方法。</p>
<p>样例类自动实现了 unapply 方法。</p>
<p>要实现提取器，只需要在该类的伴生对象中实现一个unapply 方法即可。</p>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params">var name:<span class="type">String</span>, var age:<span class="type">Int</span></span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  <span class="title">object</span> <span class="title">Student</span></span>&#123;</span><br><span class="line">    <span class="comment">//apply 根据给定字段将其封装为 Student 类型对象</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(name: <span class="type">String</span>, age: <span class="type">Int</span>): <span class="type">Student</span> = <span class="keyword">new</span> <span class="type">Student</span>(name, age)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//unapply 根据传入的学生对象，获取其各个属性值</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">unapply</span></span>(s: <span class="type">Student</span>): <span class="type">Option</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = &#123;</span><br><span class="line">      <span class="keyword">if</span>(s == <span class="literal">null</span>)</span><br><span class="line">        <span class="type">None</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        <span class="type">Some</span>(s.name, s.age)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> s = <span class="type">Student</span>(<span class="string">"sjh"</span>, <span class="number">24</span>)</span><br><span class="line">    <span class="comment">//获取 s 的属性</span></span><br><span class="line">    <span class="comment">//通过 unapply</span></span><br><span class="line">    println(<span class="type">Student</span>.unapply(s))</span><br><span class="line">    <span class="comment">//通过模式匹配 需要实现 unapply方法</span></span><br><span class="line">    s <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="type">Student</span>(name, age) =&gt; println(<span class="string">s"<span class="subst">$name</span>,<span class="subst">$age</span>"</span>)</span><br><span class="line">      <span class="keyword">case</span> _ =&gt; println(<span class="string">"未匹配"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="案例：随机职业"><a href="#案例：随机职业" class="headerlink" title="案例：随机职业"></a>案例：随机职业</h3><p>提示用户录入一个数字（1-5），然后根据数字打印出他的工作。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  println(<span class="string">"请输入一个数字，1-5："</span>)</span><br><span class="line">  <span class="keyword">val</span> num = <span class="type">StdIn</span>.readInt()</span><br><span class="line">  num <span class="keyword">match</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span> =&gt; println(<span class="string">"BAT offer"</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span> =&gt; println(<span class="string">"BAT offer"</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span> =&gt; println(<span class="string">"BAT offer"</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span> =&gt; println(<span class="string">"BAT offer"</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span> =&gt; println(<span class="string">"BAT offer"</span>)</span><br><span class="line">    <span class="keyword">case</span> _ =&gt; println(<span class="string">"在家科研，哪都别去"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="数据的读写"><a href="#数据的读写" class="headerlink" title="数据的读写"></a>数据的读写</h2><h3 id="读取数据"><a href="#读取数据" class="headerlink" title="读取数据"></a>读取数据</h3><p>在 Source 单例对象中提供了一些获取数据的方法。</p>
<h4 id="按行读取"><a href="#按行读取" class="headerlink" title="按行读取"></a>按行读取</h4><p>以行为单位，返回值是一个迭代器类型的对象，通过toArray、toList方法将数据放到数组或列表。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//创建 Source 对象，关联数据源文件</span></span><br><span class="line">    <span class="keyword">val</span> source = <span class="type">Source</span>.fromFile(<span class="string">"./data/1.txt"</span>)<span class="comment">//在项目中创建一个 data目录和对应文件</span></span><br><span class="line">    <span class="comment">//以行为单位读取数据</span></span><br><span class="line">    <span class="keyword">val</span> lines:<span class="type">Iterator</span>[<span class="type">String</span>] = source.getLines()</span><br><span class="line">    <span class="comment">//将读取到的数据封装到 List 集合</span></span><br><span class="line">    <span class="keyword">val</span> list:<span class="type">List</span>[<span class="type">String</span>] = lines.toList</span><br><span class="line">    <span class="comment">//打印结果</span></span><br><span class="line">    <span class="keyword">for</span>(data &lt;- list)</span><br><span class="line">    println(data)</span><br><span class="line">    <span class="comment">//关闭 Source</span></span><br><span class="line">    source.close()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="按字符读取"><a href="#按字符读取" class="headerlink" title="按字符读取"></a>按字符读取</h4><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//创建 Source 对象，关联数据源文件</span></span><br><span class="line">    <span class="keyword">val</span> source = <span class="type">Source</span>.fromFile(<span class="string">"./data/1.txt"</span>)<span class="comment">//默认使用utf-8</span></span><br><span class="line">    <span class="comment">//以字符为单位读取数据</span></span><br><span class="line">    <span class="keyword">val</span> buffered:<span class="type">BufferedIterator</span>[<span class="type">Char</span>] = source.buffered</span><br><span class="line">    <span class="comment">//打印结果</span></span><br><span class="line">    <span class="keyword">while</span>(buffered.hasNext)</span><br><span class="line">    print(buffered.next())<span class="comment">//不能使用println</span></span><br><span class="line">    <span class="comment">//关闭 Source</span></span><br><span class="line">    source.close()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果文件内容较少，可以直接把它读取到一个字符串中：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//创建 Source 对象，关联数据源文件</span></span><br><span class="line">    <span class="keyword">val</span> source = <span class="type">Source</span>.fromFile(<span class="string">"./data/1.txt"</span>)</span><br><span class="line">    <span class="comment">//将数据读取到字符串</span></span><br><span class="line">    <span class="keyword">val</span> string = source.mkString</span><br><span class="line">    <span class="comment">//打印结果</span></span><br><span class="line">    println(string)</span><br><span class="line">    <span class="comment">//关闭 Source</span></span><br><span class="line">    source.close()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="读取词法单元和数字"><a href="#读取词法单元和数字" class="headerlink" title="读取词法单元和数字"></a>读取词法单元和数字</h4><p>词法单元指 以特定符号间隔开的字符串</p>
<p>创建一个文本文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">10 2 5</span><br><span class="line">11 2</span><br><span class="line">5 1 3 2</span><br></pre></td></tr></table></figure>
<p>读取所有整数，将结果加1并打印</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//创建 Source 对象，关联数据源文件</span></span><br><span class="line">    <span class="keyword">val</span> source = <span class="type">Source</span>.fromFile(<span class="string">"./data/1.txt"</span>)</span><br><span class="line">    <span class="comment">//将数据读取到字符串数组 \s 表示空白字符（空格，\t，\r，\n等）</span></span><br><span class="line">    <span class="keyword">val</span> strArr:<span class="type">Array</span>[<span class="type">String</span>] = source.mkString.split(<span class="string">"\\s+"</span>)</span><br><span class="line">    <span class="keyword">val</span> intArr:<span class="type">Array</span>[<span class="type">Int</span>] = strArr.map(_.toInt)</span><br><span class="line">    <span class="comment">//打印结果</span></span><br><span class="line">    <span class="keyword">for</span> (elem &lt;- intArr) &#123;print(elem + <span class="string">" "</span>)&#125;<span class="comment">//11 3 6 12 3 6 2 4 3 </span></span><br><span class="line">    <span class="comment">//关闭 Source</span></span><br><span class="line">    source.close()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="从-URL-或其他源读取"><a href="#从-URL-或其他源读取" class="headerlink" title="从 URL 或其他源读取"></a>从 URL 或其他源读取</h4><p>从 URL 地址读取</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> source = <span class="type">Source</span>.fromURL(<span class="string">"http:www.baidu.com"</span>)</span><br></pre></td></tr></table></figure>
<p>从字符串读取</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> source = <span class="type">Source</span>.fromString(<span class="string">"字符串读取数据"</span>)</span><br></pre></td></tr></table></figure>
<p>读取二进制文件</p>
<p>示例：读取图片</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="comment">//创建File对象关联文件</span></span><br><span class="line">  <span class="keyword">val</span> file = <span class="keyword">new</span> <span class="type">File</span>(<span class="string">"./data/1.jpg"</span>)</span><br><span class="line">  <span class="comment">//创建字节输入流</span></span><br><span class="line">  <span class="keyword">val</span> fis = <span class="keyword">new</span> <span class="type">FileInputStream</span>(file)</span><br><span class="line">  <span class="keyword">val</span> bytes = <span class="keyword">new</span> <span class="type">Array</span>[<span class="type">Byte</span>](file.length().toInt)</span><br><span class="line">  <span class="comment">//开始读取</span></span><br><span class="line">  <span class="keyword">val</span> len = fis.read(bytes)</span><br><span class="line">  println(<span class="string">s"读取到的字节数：<span class="subst">$len</span>"</span>)</span><br><span class="line">  <span class="comment">//关闭字节输入流</span></span><br><span class="line">  fis.close()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="写入数据"><a href="#写入数据" class="headerlink" title="写入数据"></a>写入数据</h3><p>要使用 Java 的类库</p>
<h4 id="往文件中写入指定内容"><a href="#往文件中写入指定内容" class="headerlink" title="往文件中写入指定内容"></a>往文件中写入指定内容</h4><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="comment">//创建字节输出流</span></span><br><span class="line">  <span class="keyword">val</span> fos = <span class="keyword">new</span> <span class="type">FileOutputStream</span>(<span class="string">"./data/1.txt"</span>)<span class="comment">//目的地不存在会自动创建</span></span><br><span class="line">  <span class="comment">//输出</span></span><br><span class="line">  fos.write(<span class="string">"GetOffer"</span>.getBytes())</span><br><span class="line">  <span class="comment">//关闭输出流</span></span><br><span class="line">  fos.close()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="序列化和反序列化"><a href="#序列化和反序列化" class="headerlink" title="序列化和反序列化"></a>序列化和反序列化</h4><p>要实现序列化必须继承 Serializable 特质（标记接口），如果是样例类可以省略继承</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params">name:<span class="type">String</span>, age:<span class="type">Int</span></span>) [extends <span class="type">Serializable</span>]</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">def</span> <span class="title">main</span>(<span class="params">args: <span class="type">Array</span>[<span class="type">String</span>]</span>)</span>: <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> p = <span class="type">Person</span>(<span class="string">"sjh"</span>, <span class="number">24</span>)</span><br><span class="line">  <span class="comment">//序列化</span></span><br><span class="line">  <span class="keyword">val</span> outputStream = <span class="keyword">new</span> <span class="type">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="type">FileOutputStream</span>(<span class="string">"./data/2.txt"</span>))</span><br><span class="line">  outputStream.writeObject(p)</span><br><span class="line">  outputStream.close()</span><br><span class="line">  <span class="comment">//反序列化</span></span><br><span class="line">  <span class="keyword">val</span> inputStream = <span class="keyword">new</span> <span class="type">ObjectInputStream</span>(<span class="keyword">new</span> <span class="type">FileInputStream</span>(<span class="string">"./data/2.txt"</span>))</span><br><span class="line">  <span class="keyword">val</span> person = inputStream.readObject().asInstanceOf[<span class="type">Person</span>]<span class="comment">//读取出的对象是AnyRef，要转换</span></span><br><span class="line">  println(person)</span><br><span class="line">  inputStream.close()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="案例：学员成绩表"><a href="#案例：学员成绩表" class="headerlink" title="案例：学员成绩表"></a>案例：学员成绩表</h3><p>已知项目 data 文件夹下的 1.txt 记录了学生成绩如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">张三 37 90 100</span><br><span class="line">李四 90 73 81</span><br><span class="line">王五 60 90 76</span><br><span class="line">赵六 89 21 72</span><br><span class="line">田七 100 100 100</span><br></pre></td></tr></table></figure>
<p>按照学生总成绩进行排名，按照姓名-语文成绩-数学成绩-英语成绩-总成绩的格式，输出到 2.txt</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params">var name:<span class="type">String</span>,var chinese:<span class="type">Int</span>, var math:<span class="type">Int</span>, var english:<span class="type">Int</span></span>)</span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">getSum</span></span>:<span class="type">Int</span> = chinese + math +english</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="comment">//获取数据源文件</span></span><br><span class="line">  <span class="keyword">val</span> source = <span class="type">Source</span>.fromFile(<span class="string">"./data/1.txt"</span>)</span><br><span class="line">  <span class="comment">//封装到数组</span></span><br><span class="line">  <span class="keyword">val</span> array:<span class="type">Iterator</span>[<span class="type">Array</span>[<span class="type">String</span>]] = source.getLines().map(_.split(<span class="string">" "</span>))</span><br><span class="line">  <span class="comment">//定义可变列表存储学生信息</span></span><br><span class="line">  <span class="keyword">val</span> stuList = <span class="type">ListBuffer</span>[<span class="type">Student</span>]()</span><br><span class="line">  <span class="comment">//遍历数组，将数据封装成 Student 对象，添加到可变列表</span></span><br><span class="line">  <span class="keyword">for</span>(s &lt;- array)&#123;</span><br><span class="line">    stuList += <span class="type">Student</span>(s(<span class="number">0</span>), s(<span class="number">1</span>).toInt, s(<span class="number">2</span>).toInt, s(<span class="number">3</span>).toInt)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//排序</span></span><br><span class="line">  <span class="keyword">val</span> list = stuList.sortBy(_.getSum).reverse.toList</span><br><span class="line">  <span class="comment">//通过字符输出流输出文件</span></span><br><span class="line">  <span class="keyword">val</span> bw = <span class="keyword">new</span> <span class="type">BufferedWriter</span>(<span class="keyword">new</span> <span class="type">FileWriter</span>(<span class="string">"./data/2.txt"</span>))</span><br><span class="line">  bw.write(<span class="string">"姓名 语文 数学 英语 总分"</span>)</span><br><span class="line">  bw.newLine()</span><br><span class="line">  <span class="keyword">for</span>(s &lt;- list)&#123;</span><br><span class="line">    bw.write(<span class="string">s"<span class="subst">$&#123;s.name&#125;</span> <span class="subst">$&#123;s.chinese&#125;</span> <span class="subst">$&#123;s.math&#125;</span> <span class="subst">$&#123;s.english&#125;</span> <span class="subst">$&#123;s.getSum&#125;</span>"</span>)</span><br><span class="line">    bw.newLine()<span class="comment">//换行</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//关闭资源</span></span><br><span class="line">  bw.close()</span><br><span class="line">  source.close()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.txt：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">姓名 语文 数学 英语 总分</span><br><span class="line">田七 100 100 100 300</span><br><span class="line">李四 90 73 81 244</span><br><span class="line">张三 37 90 100 227</span><br><span class="line">王五 60 90 76 226</span><br><span class="line">赵六 89 21 72 182</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h2><p>Scala 混合了面向对象和函数式特性，如果一个函数的参数列表可以接收函数对象，那么这个函数就被称为高阶函数。</p>
<h3 id="作为值的函数"><a href="#作为值的函数" class="headerlink" title="作为值的函数"></a>作为值的函数</h3><p>可以将函数对象传递给方法 。</p>
<p>需求：将一个整数列表中的每个元素转换为对应个数的*。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> list = (<span class="number">1</span> to <span class="number">5</span>).toList</span><br><span class="line">    <span class="keyword">val</span> func = (x:<span class="type">Int</span>) =&gt; <span class="string">"*"</span> * x</span><br><span class="line">    <span class="keyword">val</span> list1 = list.map(func)</span><br><span class="line">    println(list1)<span class="comment">//List(*, **, ***, ****, *****)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h3><p>没有赋值给变量的函数就是匿名函数</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> list = (<span class="number">1</span> to <span class="number">5</span>).toList</span><br><span class="line">  <span class="keyword">val</span> list1 = list.map((x:<span class="type">Int</span>) =&gt; <span class="string">"*"</span> * x)</span><br><span class="line">  <span class="keyword">val</span> list2 = list.map(<span class="string">"*"</span> * _)</span><br><span class="line">  println(list1)<span class="comment">//List(*, **, ***, ****, *****)</span></span><br><span class="line">  println(list2)<span class="comment">//List(*, **, ***, ****, *****)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="柯里化"><a href="#柯里化" class="headerlink" title="柯里化"></a>柯里化</h3><p>柯里化指 将原先接收多个参数的方法转换为多个只有一个参数列表的过程</p>
<p>需求：定义方法完成两个字符串的拼接</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//普通写法</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">merge1</span></span>(str1:<span class="type">String</span>, str2:<span class="type">String</span>): <span class="type">String</span> = str1 + str2</span><br><span class="line"></span><br><span class="line">  <span class="comment">//柯里化 f1表示函数</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">merge2</span></span>(str1:<span class="type">String</span>, str2:<span class="type">String</span>)(f1:(<span class="type">String</span>, <span class="type">String</span>) =&gt; <span class="type">String</span>): <span class="type">String</span> = f1(str1, str2)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(merge1(<span class="string">"abc"</span>, <span class="string">"def"</span>))<span class="comment">//abcdef</span></span><br><span class="line">    println(merge2(<span class="string">"abc"</span>, <span class="string">"def"</span>)(_ + _))<span class="comment">//abcdef</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>闭包指 可以访问不在当前作用域范围数据的一个函数。（柯里化就是一个闭包）</p>
<p>通过闭包获取两个整数的和：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> x = <span class="number">10</span></span><br><span class="line">    <span class="keyword">val</span> sum = (y:<span class="type">Int</span>) =&gt; x + y</span><br><span class="line">    println(sum(<span class="number">10</span>))<span class="comment">//20</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="控制抽象"><a href="#控制抽象" class="headerlink" title="控制抽象"></a>控制抽象</h3><p>假设函数 A 的参数列表需要接收一个函数 B，而函数B没有输入值也没有返回值，那么函数A称为控制抽象函数。</p>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">val</span> func = (f1:() =&gt; <span class="type">Unit</span>) =&gt; &#123;</span><br><span class="line">    println(<span class="string">"welcome"</span>)</span><br><span class="line">    f1()</span><br><span class="line">    println(<span class="string">"bye"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    func(() =&gt; println(<span class="string">"shopping.."</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">welcome</span><br><span class="line">shopping..</span><br><span class="line">bye</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="案例：计算器-1"><a href="#案例：计算器-1" class="headerlink" title="案例：计算器"></a>案例：计算器</h3><p>定义一个方法，用来完成两个 Int 类型数字的计算</p>
<p>具体计算封装到函数中</p>
<p>使用柯里化完成操作</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//普通写法</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">add</span></span>(a:<span class="type">Int</span>, b:<span class="type">Int</span>): <span class="type">Int</span> = a + b</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sub</span></span>(a:<span class="type">Int</span>, b:<span class="type">Int</span>): <span class="type">Int</span> = a - b</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">mul</span></span>(a:<span class="type">Int</span>, b:<span class="type">Int</span>): <span class="type">Int</span> = a * b</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">div</span></span>(a:<span class="type">Int</span>, b:<span class="type">Int</span>): <span class="type">Int</span> = a / b</span><br><span class="line"></span><br><span class="line">  <span class="comment">//柯里化</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">calculate</span></span>(a:<span class="type">Int</span>, b:<span class="type">Int</span>)(func:(<span class="type">Int</span>,<span class="type">Int</span>) =&gt; <span class="type">Int</span>): <span class="type">Int</span> = func(a, b)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(calculate(<span class="number">1</span>, <span class="number">1</span>)(_ + _))<span class="comment">//2</span></span><br><span class="line">    println(calculate(<span class="number">1</span>, <span class="number">1</span>)(_ - _))<span class="comment">//0</span></span><br><span class="line">    println(calculate(<span class="number">1</span>, <span class="number">1</span>)(_ * _))<span class="comment">//1</span></span><br><span class="line">    println(calculate(<span class="number">1</span>, <span class="number">1</span>)(_ / _))<span class="comment">//1</span></span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="隐式转换和隐式参数"><a href="#隐式转换和隐式参数" class="headerlink" title="隐式转换和隐式参数"></a>隐式转换和隐式参数</h2><h3 id="隐式转换"><a href="#隐式转换" class="headerlink" title="隐式转换"></a>隐式转换</h3><p>隐式转换指用 implicit 关键字 声明的带有 单个参数 的方法。该方法是被自动调用的，用来实现自动将某种类型的数据转换为另一种类型的数据。</p>
<p>示例：手动导入</p>
<p>通过隐式转换，让 File 类的对象具有 read 功能。</p>
<p>执行流程：file对象没有read方法 -&gt; 有隐式转换 -&gt; 将File转为RichFile对象</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">RichFile</span>(<span class="params">file: <span class="type">File</span></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//定义 read 方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">read</span></span>(): <span class="type">String</span> = <span class="type">Source</span>.fromFile(file).mkString</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="class"><span class="keyword">object</span> <span class="title">Implicit</span></span>&#123;</span><br><span class="line">    <span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">file2RichFile</span></span>(file: <span class="type">File</span>): <span class="type">RichFile</span> = <span class="keyword">new</span> <span class="type">RichFile</span>(file)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//手动导入</span></span><br><span class="line">    <span class="keyword">import</span> <span class="type">Implicit</span>.file2RichFile</span><br><span class="line">    <span class="keyword">val</span> file = <span class="keyword">new</span> <span class="type">File</span>(<span class="string">"./data/1.txt"</span>)</span><br><span class="line">    file.read()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>自动调用隐式转换：</p>
<ul>
<li>当对象调用类中不存在的方法或成员时</li>
<li>当方法参数类型与目标类型不一致时</li>
</ul>
<p>如果在当前作用域存在隐式转换方法，会自动导入隐式转换</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">RichFile</span>(<span class="params">file: <span class="type">File</span></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//定义 read 方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">read</span></span>(): <span class="type">String</span> = <span class="type">Source</span>.fromFile(file).mkString</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//自动导入</span></span><br><span class="line">    <span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">file2RichFile</span></span>(file: <span class="type">File</span>): <span class="type">RichFile</span> = <span class="keyword">new</span> <span class="type">RichFile</span>(file)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">val</span> file = <span class="keyword">new</span> <span class="type">File</span>(<span class="string">"./data/1.txt"</span>)</span><br><span class="line">    file.read()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="隐式参数"><a href="#隐式参数" class="headerlink" title="隐式参数"></a>隐式参数</h3><p>隐式参数指用 implicit 关键字 修饰的变量。调用方法时可以不给定初始值，因为编译器会自动查找缺省值。</p>
<p><strong>使用步骤：</strong></p>
<ul>
<li>在方法后添加一个参数列表，参数使用 implicit 修饰</li>
<li>在 object 中定义 implicit 修饰的隐式值</li>
<li>调用该方法，可以不传入 implicit 修饰的参数值</li>
</ul>
<p>和隐式转换一样，可以手动导入，如果作用域内定义了隐式值可以自动导入。</p>
<hr>
<p>定义一个show方法，实现将传入的值，使用指定前缀分隔符和后缀分隔符包装起来。</p>
<p>例如 show(“a”)(“&lt;&lt;”,”&gt;&gt;”) // &lt;\<a>&gt;</a></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//name表示姓名，第一个String表示前缀信息，第二个String表示后缀信息</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">show</span></span>(name:<span class="type">String</span>)(<span class="keyword">implicit</span> delimit:(<span class="type">String</span>, <span class="type">String</span>)): <span class="type">String</span> = delimit._1 + name +delimit._2</span><br><span class="line"></span><br><span class="line">  <span class="comment">//定义单例对象，用来给隐式参数默认值</span></span><br><span class="line">  <span class="class"><span class="keyword">object</span> <span class="title">Implicit</span></span>&#123;</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">val</span> delimit_default: (<span class="type">String</span>, <span class="type">String</span>) = (<span class="string">"&lt;&lt;"</span> ,<span class="string">"&gt;&gt;"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//手动导入</span></span><br><span class="line">    <span class="keyword">import</span> <span class="type">Implicit</span>.delimit_default</span><br><span class="line">    <span class="comment">//调用show</span></span><br><span class="line">    println(show(<span class="string">"abc"</span>))<span class="comment">//&lt;&lt;abc&gt;&gt;</span></span><br><span class="line">    println(show(<span class="string">"abc"</span>)(<span class="string">"&lt;-"</span>, <span class="string">"-&gt;"</span>))<span class="comment">//&lt;-abc-&gt;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>自动导入</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//name表示姓名，第一个String表示前缀信息，第二个String表示后缀信息</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">show</span></span>(name:<span class="type">String</span>)(<span class="keyword">implicit</span> delimit:(<span class="type">String</span>, <span class="type">String</span>)): <span class="type">String</span> = delimit._1 + name +delimit._2</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//自动导入</span></span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">val</span> delimit_default: (<span class="type">String</span>, <span class="type">String</span>) = (<span class="string">"&lt;&lt;"</span> ,<span class="string">"&gt;&gt;"</span>)</span><br><span class="line">    <span class="comment">//调用show</span></span><br><span class="line">    println(show(<span class="string">"abc"</span>))<span class="comment">//&lt;&lt;abc&gt;&gt;</span></span><br><span class="line">    println(show(<span class="string">"abc"</span>)(<span class="string">"&lt;-"</span>, <span class="string">"-&gt;"</span>))<span class="comment">//&lt;-abc-&gt;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="案例：获取列表元素平均值"><a href="#案例：获取列表元素平均值" class="headerlink" title="案例：获取列表元素平均值"></a>案例：获取列表元素平均值</h3><p>通过隐式转换，获取列表中所有元素的平均值。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">RichList</span>(<span class="params">list: <span class="type">List</span>[<span class="type">Int</span>]</span>)</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">avg</span></span>(): <span class="type">Option</span>[<span class="type">Int</span>] = &#123;</span><br><span class="line">      <span class="keyword">if</span>(list.isEmpty)</span><br><span class="line">        <span class="type">None</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        <span class="type">Some</span>(list.sum / list.size)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//自动导入</span></span><br><span class="line">    <span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">list2RichList</span></span>(list: <span class="type">List</span>[<span class="type">Int</span>]): <span class="type">RichList</span> = <span class="keyword">new</span> <span class="type">RichList</span>(list)</span><br><span class="line">    <span class="comment">//调用</span></span><br><span class="line">    <span class="keyword">val</span> list = (<span class="number">1</span> to <span class="number">10</span>).toList</span><br><span class="line">    println(list.avg())<span class="comment">//Some(5)</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h2><p>递归就是方法自己调用自己</p>
<p>示例：求阶乘</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">f</span></span>(n: <span class="type">Int</span>): <span class="type">Int</span> = <span class="keyword">if</span>(n == <span class="number">1</span>) n <span class="keyword">else</span> n * f(n - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(f(<span class="number">5</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="内存图解"><a href="#内存图解" class="headerlink" title="内存图解"></a>内存图解</h3><p>Scala 中，内存分为五部分</p>
<ul>
<li><p>栈</p>
<p>所有代码的执行、存储局部变量。</p>
<p>按照 FILO 的顺序执行，方法执行完毕后立马被回收。</p>
</li>
<li><p>堆</p>
<p>存储所有new 出来的对象。</p>
<p>在不确定的时间被垃圾收集器回收。</p>
</li>
<li><p>方法区</p>
<p>存储字节码文件，方法等数据。</p>
<p>程序执行完毕后，由操作系统回收资源。</p>
</li>
<li><p>本地方法区</p>
<p>和本地方法相关。</p>
</li>
<li><p>寄存器</p>
<p>和 CPU 相关。</p>
</li>
</ul>
<hr>
<h3 id="斐波那契数列"><a href="#斐波那契数列" class="headerlink" title="斐波那契数列"></a>斐波那契数列</h3><p>已知数列1，1，2，3，5，8，13，求第12个数字。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">f</span></span>(n: <span class="type">Int</span>): <span class="type">Int</span> = &#123;</span><br><span class="line">    <span class="keyword">if</span>(n == <span class="number">1</span> || n == <span class="number">2</span>)</span><br><span class="line">      <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      f(n - <span class="number">1</span>) + f(n - <span class="number">2</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    println(f(<span class="number">12</span>))<span class="comment">//144</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="案例：打印目录文件"><a href="#案例：打印目录文件" class="headerlink" title="案例：打印目录文件"></a>案例：打印目录文件</h3><p>定义 printFile 方法，该方法打印该文件夹下所有文件路径。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">printFile</span></span>(dir: <span class="type">File</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">if</span>(!dir.isDirectory)</span><br><span class="line">      println(<span class="string">"路径不合法"</span>)</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">//获取该目录下所有文件及文件夹</span></span><br><span class="line">      <span class="keyword">val</span> files:<span class="type">Array</span>[<span class="type">File</span>] = dir.listFiles()</span><br><span class="line">      <span class="keyword">for</span>(listFile &lt;- files)&#123;</span><br><span class="line">        <span class="keyword">if</span>(listFile.isDirectory)</span><br><span class="line">          printFile(listFile)</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">          println(listFile)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    printFile(<span class="keyword">new</span> <span class="type">File</span>(<span class="string">"d:/"</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><h3 id="泛型-1"><a href="#泛型-1" class="headerlink" title="泛型"></a>泛型</h3><p>泛型的意思是 泛指某种具体的数据类型，在 Scala 中泛型用 <code>[数据类型]</code> 表示。</p>
<ul>
<li><p>泛型方法</p>
<p>示例，定义一个泛型方法，获取任意数据类型的中间元素</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getMiddleElement</span></span>[<span class="type">T</span>](array: <span class="type">Array</span>[<span class="type">T</span>]): <span class="type">T</span> = &#123;array(array.length / <span class="number">2</span>)&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>泛型类</p>
<p>示例，定义一个 Pair 泛型类，包含两个字段且字段类型不固定</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span>[<span class="type">T</span>](<span class="params">var a:<span class="type">T</span>, var b:<span class="type">T</span></span>)</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>泛型特质</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Logger</span>[<span class="type">T</span>]</span>&#123;</span><br><span class="line">  <span class="keyword">val</span> a:<span class="type">T</span></span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">show</span></span>(b:<span class="type">T</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ConsoleLogger</span> <span class="keyword">extends</span> <span class="title">Logger</span>[<span class="type">String</span>]</span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="keyword">val</span> a: <span class="type">String</span> = <span class="string">"sjh"</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">show</span></span>(b: <span class="type">String</span>): <span class="type">Unit</span> = println(b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="上下界"><a href="#上下界" class="headerlink" title="上下界"></a>上下界</h3><p>上界</p>
<p>使用 <code>T &lt;: 类型名</code> 表示给类型添加一个上界，表示该类型必须是 T 或 T 的子类。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  <span class="title">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  <span class="title">def</span> <span class="title">demo</span>[<span class="type">T</span> &lt;: <span class="type">Person</span>](<span class="params">array: <span class="type">Array</span>[<span class="type">T</span>]</span>)</span>: <span class="type">Unit</span> = println(array)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    demo(<span class="type">Array</span>(<span class="keyword">new</span> <span class="type">Person</span>))</span><br><span class="line">    demo(<span class="type">Array</span>(<span class="keyword">new</span> <span class="type">Student</span>))</span><br><span class="line">    demo(<span class="type">Array</span>(<span class="string">"a"</span>))<span class="comment">//报错</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下界</p>
<p>使用 <code>T &gt;: 类型名</code> 表示给类型添加一个下界，表示该类型必须是 T 或 T 的父类。</p>
<p>如果泛型既有上界又有下界，下界写在前面，<code>[T &gt;: A &lt;: B]</code></p>
<hr>
<h3 id="协变、逆变、非变"><a href="#协变、逆变、非变" class="headerlink" title="协变、逆变、非变"></a>协变、逆变、非变</h3><p>协变：类 A 和 类 B 之间是父子类关系，Pair[A] 和 Pari[B] 之间也有父子关系。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span>[+<span class="type">T</span>]</span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>逆变：类 A 和 类 B 之间是父子类关系，但 Pair[A] 和 Pari[B] 之间是子父关系。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span>[-<span class="type">T</span>]</span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>非变：类 A 和 类 B 之间是父子类关系，Pair[A] 和 Pari[B] 之间没有任何关系。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span>[<span class="type">T</span>]</span>&#123;&#125; <span class="comment">//默认类型是非变的</span></span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Super</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  <span class="title">class</span> <span class="title">Sub</span> <span class="keyword">extends</span> <span class="title">Super</span></span></span><br><span class="line"><span class="class">  </span></span><br><span class="line"><span class="class">  <span class="title">class</span> <span class="title">Temp1</span>[<span class="type">T</span>]</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  <span class="title">class</span> <span class="title">Temp2</span>[+<span class="type">T</span>]</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  <span class="title">class</span> <span class="title">Temp3</span>[-<span class="type">T</span>]</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  <span class="title">def</span> <span class="title">main</span>(<span class="params">args: <span class="type">Array</span>[<span class="type">String</span>]</span>)</span>: <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//测试非变</span></span><br><span class="line">    <span class="keyword">val</span> t1:<span class="type">Temp1</span>[<span class="type">Sub</span>] = <span class="keyword">new</span> <span class="type">Temp1</span>[<span class="type">Sub</span>]</span><br><span class="line">    <span class="comment">//val t2:Temp1[Super] = t1 报错</span></span><br><span class="line">    <span class="comment">//测试协变</span></span><br><span class="line">    <span class="keyword">val</span> t3:<span class="type">Temp2</span>[<span class="type">Sub</span>] = <span class="keyword">new</span> <span class="type">Temp2</span>[<span class="type">Sub</span>]</span><br><span class="line">    <span class="keyword">val</span> t4:<span class="type">Temp2</span>[<span class="type">Super</span>] = t3</span><br><span class="line">    <span class="comment">//测试逆变</span></span><br><span class="line">    <span class="keyword">val</span> t5:<span class="type">Temp3</span>[<span class="type">Super</span>] = <span class="keyword">new</span> <span class="type">Temp3</span>[<span class="type">Super</span>]</span><br><span class="line">    <span class="keyword">val</span> t6:<span class="type">Temp3</span>[<span class="type">Sub</span>] = t5</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><p>分类：</p>
<ul>
<li><p>可变集合 线程不安全</p>
<p>集合本身可以动态变化，且可变集合提供了改变集合内元素而都方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scala.collection.mutable //需要手动导包</span><br></pre></td></tr></table></figure>
</li>
<li><p>不可变集合 线程安全</p>
<p>默认类库，集合内的元素一旦初始化完成就不可再进行更改，任何对集合的改变都将生成一个新的集合。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scala.collection.immutable //不需要手动导包</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<ul>
<li>Set 无序、唯一<ul>
<li>HashSet</li>
<li>SortedSet<ul>
<li>TreeSet</li>
<li>BitSet</li>
</ul>
</li>
<li>ListSet</li>
</ul>
</li>
<li>Seq 序列、有序、可重复、元素有索引<ul>
<li>IndexedSeq 索引序列，随机访问效率高<ul>
<li>NumericRange Range的加强</li>
<li>Range 有序整数序列，类似等差数列</li>
<li>Vector 通用不可变的数据结构，获取元素时间长，随机更新快于数组或列表</li>
<li>String 字符串</li>
</ul>
</li>
<li>LinearSeq 线性序列，主要操作首尾元素<ul>
<li>List 列表</li>
<li>Queue 队列</li>
<li>Stack 栈 不可变栈已经弃用</li>
<li>Stream 流</li>
</ul>
</li>
</ul>
</li>
<li>Map<ul>
<li>HashMap</li>
<li>SortedMap<ul>
<li>TreeMap</li>
</ul>
</li>
<li>ListMap</li>
</ul>
</li>
</ul>
<p>可变集合比不可变集合更丰富，例如在 Seq 中，增加了 Buffer 集合，例如 ArrayBuffer 和 ListBuffer。</p>
<hr>
<h3 id="Traverable"><a href="#Traverable" class="headerlink" title="Traverable"></a>Traverable</h3><p>Traverable 是一个特质，它的子特质 immutable.Traverable 和 mutable.Traverable 分别是不可变集合和可变集合的父特质。</p>
<p><strong>格式：</strong></p>
<p>创建空的Traverable 对象。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> t = <span class="type">Traverable</span>.empty[<span class="type">Int</span>]</span><br><span class="line"><span class="keyword">val</span> t = <span class="type">Traverable</span>[<span class="type">Int</span>]()</span><br><span class="line"><span class="keyword">val</span> t = <span class="type">Nil</span></span><br></pre></td></tr></table></figure>
<p>创建带参数的Traverable 对象。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> t = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>).toTraverable</span><br><span class="line"><span class="keyword">val</span> t = <span class="type">Traverable</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)<span class="comment">//默认生成List</span></span><br></pre></td></tr></table></figure>
<hr>
<p><strong>转置：</strong></p>
<p>使用 transpose 方法。</p>
<p>转置操作时，需要每个集合的元素个数相同。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> t1 = <span class="type">Traversable</span>(<span class="type">Traversable</span>(<span class="number">1</span>, <span class="number">4</span>, <span class="number">7</span>), <span class="type">Traversable</span>(<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>), <span class="type">Traversable</span>(<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>))</span><br><span class="line">  println(t1)<span class="comment">//List(List(1, 4, 7), List(2, 5, 8), List(3, 6, 9))</span></span><br><span class="line">  <span class="keyword">val</span> transpose = t1.transpose</span><br><span class="line">  println(transpose)<span class="comment">//List(List(1, 2, 3), List(4, 5, 6), List(7, 8, 9))</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>拼接：</strong></p>
<p><code>++</code> 可以拼接数据，但是会创建大量临时集合，可以通过 concat 方法实现。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> t1 = <span class="type">Traversable</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">  <span class="keyword">val</span> t2 = <span class="type">Traversable</span>(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">  <span class="keyword">val</span> traversable = <span class="type">Traversable</span>.concat(t1, t2)</span><br><span class="line">  println(traversable)<span class="comment">//List(1, 2, 3, 4, 5, 6)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>筛选：</strong></p>
<p>利用 collect 方法实现偏函数结合集合使用，从集合中筛选指定数据。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> t1 = (<span class="number">1</span> to <span class="number">10</span>).toList</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">filter</span></span>:<span class="type">PartialFunction</span>[<span class="type">Int</span>, <span class="type">Int</span>] = &#123;</span><br><span class="line">    <span class="keyword">case</span> x <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span> =&gt; x</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//val t2 = t1.collect(filter)</span></span><br><span class="line">  <span class="keyword">val</span> t2 = t1.collect(&#123;</span><br><span class="line">    <span class="keyword">case</span> x <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span> =&gt; x</span><br><span class="line">  &#125;)</span><br><span class="line">  println(t2)<span class="comment">//List(2, 4, 6, 8, 10)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>scan 方法</strong></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">scan</span></span>[<span class="type">B</span>](z:<span class="type">B</span>)(op: (<span class="type">B</span>, <span class="type">B</span>) =&gt; <span class="type">B</span>)</span><br></pre></td></tr></table></figure>
<p>[B] 表示返回值的数据类型，(z:B)表示初始化值，(op: (B, B) =&gt; B)表示具体的函数运算。</p>
<p>示例：定义 traversable 集合，存储1-5，假设初始值为1，分别获取每个元素的阶乘值。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> t1 = <span class="number">1</span> to <span class="number">5</span></span><br><span class="line">  <span class="comment">//val seq = t1.scan(1)((a, b) =&gt; a * b)</span></span><br><span class="line">  <span class="keyword">val</span> seq = t1.scan(<span class="number">1</span>)(_ * _)</span><br><span class="line">  println(seq)<span class="comment">//Vector(1, 1, 2, 6, 24, 120)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>获取集合指定元素</strong></p>
<p>head/last ： 获取第一个/最后一个元素，不存在抛出异常</p>
<p>headOption/lastOption ： 获取获取第一个/最后一个元素，返回值是 Option</p>
<p>find： 查找符号条件的第一个元素</p>
<p>slice ：截取集合中的一部分元素，左闭右开</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> t1 = <span class="number">1</span> to <span class="number">5</span></span><br><span class="line">  println(t1.head)<span class="comment">//1</span></span><br><span class="line">  println(t1.last)<span class="comment">//5</span></span><br><span class="line">  println(t1.headOption)<span class="comment">//Some(1)</span></span><br><span class="line">  println(t1.lastOption)<span class="comment">//Some(5)</span></span><br><span class="line">  println(t1.find(_ % <span class="number">2</span> == <span class="number">0</span>))<span class="comment">//Some(2)</span></span><br><span class="line">  println(t1.slice(<span class="number">0</span>, <span class="number">2</span>))<span class="comment">//Vector(1, 2)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>判断元素是否合法</strong></p>
<p>forall 如果集合中所有元素都满足条件返回 true</p>
<p>exist 如果集合中有一个元素满足条件返回 true</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> t1 = <span class="number">1</span> to <span class="number">5</span></span><br><span class="line">  println(t1.forall(_ % <span class="number">2</span> == <span class="number">0</span>))<span class="comment">//false</span></span><br><span class="line">  println(t1.exists(_ % <span class="number">2</span> == <span class="number">0</span>))<span class="comment">//true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>聚合函数</strong></p>
<p>count 统计集合中满足条件的元素个数</p>
<p>sum 获取集合元素和</p>
<p>product 获取集合中所有元素成绩</p>
<p>max 获取集合中所有元素最大值</p>
<p>min 获取集合中所有元素最小值</p>
<hr>
<p><strong>集合类型转换</strong></p>
<ul>
<li>toList</li>
<li>toSet</li>
<li>toArray</li>
<li>toSeq</li>
</ul>
<hr>
<p><strong>填充元素</strong></p>
<p>fill 快速生成指定数量的元素</p>
<p>iterator 根据指定条件，生成指定个数的元素</p>
<p>range 生成某个区间内的指定间隔的所有数据，不传间隔参数默认 1</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> t1 = <span class="type">Traversable</span>.fill(<span class="number">5</span>)(<span class="string">"a"</span>)</span><br><span class="line">  println(t1)<span class="comment">//List(a, a, a, a, a)</span></span><br><span class="line">  <span class="keyword">val</span> t2 = <span class="type">Traversable</span>.fill(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>)(<span class="string">"a"</span>)</span><br><span class="line">  println(t2)<span class="comment">//List(List(List(a, a), List(a, a)), List(List(a, a), List(a, a)))</span></span><br><span class="line">  <span class="keyword">val</span> t3 = <span class="type">Traversable</span>.iterate(<span class="number">1</span>, <span class="number">5</span>)(_ * <span class="number">10</span>)</span><br><span class="line">  println(t3)<span class="comment">//List(1, 10, 100, 1000, 10000)</span></span><br><span class="line">  <span class="keyword">val</span> t4 = <span class="type">Traversable</span>.range(<span class="number">1</span>, <span class="number">100</span>, <span class="number">7</span>)</span><br><span class="line">  println(t4)<span class="comment">//List(1, 8, 15, 22, 29, 36, 43, 50, 57, 64, 71, 78, 85, 92, 99)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="案例：随机学生序列"><a href="#案例：随机学生序列" class="headerlink" title="案例：随机学生序列"></a>案例：随机学生序列</h3><p>定义一个 Traversable 集合，包含 5 个学生信息，学生姓名年龄随机生成。</p>
<p>按照学生年龄降序排列并打印。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ClassDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params">name:<span class="type">String</span>, age:<span class="type">Int</span></span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">  <span class="title">def</span> <span class="title">main</span>(<span class="params">args: <span class="type">Array</span>[<span class="type">String</span>]</span>)</span>: <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> names: <span class="type">List</span>[<span class="type">String</span>] = <span class="type">List</span>(<span class="string">"aa"</span> ,<span class="string">"bb"</span>, <span class="string">"cc"</span>, <span class="string">"dd"</span>, <span class="string">"ee"</span>)</span><br><span class="line">    <span class="keyword">val</span> r:<span class="type">Random</span> = <span class="keyword">new</span> <span class="type">Random</span>()</span><br><span class="line">    <span class="keyword">val</span> students = <span class="type">Traversable</span>.fill(<span class="number">5</span>)(<span class="type">Student</span>(names(r.nextInt(names.size)), r.nextInt(<span class="number">10</span>) + <span class="number">20</span>))</span><br><span class="line">    <span class="keyword">val</span> list = students.toList</span><br><span class="line">    <span class="keyword">val</span> list1 = list.sortWith(_.age &lt; _.age)</span><br><span class="line">    println(list1)<span class="comment">//List(Student(ee,22), Student(bb,23), Student(ee,23), Student(ee,24), Student(aa,26))</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Iterable"><a href="#Iterable" class="headerlink" title="Iterable"></a>Iterable</h3><p>Iterable 表示一个可以迭代的集合，它继承了 Travsersable 特质，同时也是其他集合的父特质。它定义了获取迭代器的方法，这是一个抽象方法。</p>
<p>遍历集合示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> list = <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">  <span class="comment">//方式一 主动迭代</span></span><br><span class="line">  <span class="keyword">val</span> iterator = list.iterator</span><br><span class="line">  <span class="keyword">while</span> (iterator.hasNext)</span><br><span class="line">    print(iterator.next() + <span class="string">" "</span>)</span><br><span class="line">  <span class="comment">//方式二 被动迭代</span></span><br><span class="line">  list.foreach(x =&gt; print(x + <span class="string">" "</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>分组遍历示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> i = (<span class="number">1</span> to <span class="number">5</span>).toIterable</span><br><span class="line">  <span class="keyword">val</span> iterator = i.grouped(<span class="number">2</span>)</span><br><span class="line">  <span class="keyword">while</span> (iterator.hasNext)</span><br><span class="line">    print(iterator.next() +<span class="string">" "</span>)<span class="comment">//Vector(1, 2) Vector(3, 4) Vector(5) </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>按照索引生成元组：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> i = <span class="type">Iterable</span>(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>, <span class="string">"E"</span>)</span><br><span class="line">    <span class="keyword">val</span> tuples = i.zipWithIndex.map(x =&gt; x._2 -&gt; x._1)</span><br><span class="line">    println(tuples)<span class="comment">//List((0,A), (1,B), (2,C), (3,D), (4,E))</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>判断集合是否相同：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> i1 = <span class="type">Iterable</span>(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>)</span><br><span class="line">  <span class="keyword">val</span> i2 = <span class="type">Iterable</span>(<span class="string">"A"</span>, <span class="string">"C"</span>, <span class="string">"B"</span>)</span><br><span class="line">  <span class="keyword">val</span> i3 = <span class="type">Iterable</span>(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>)</span><br><span class="line">  println(i1.sameElements(i2))<span class="comment">//false</span></span><br><span class="line">  println(i1.sameElements(i3))<span class="comment">//true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Seq"><a href="#Seq" class="headerlink" title="Seq"></a>Seq</h3><p>Seq 特质代表 按照一定顺序排列的元素序列，序列是一种特别的可迭代集合，它的特点是有序、可重复、有索引</p>
<p><strong>创建 Seq 集合：</strong></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> seq = (<span class="number">1</span> to <span class="number">5</span>).toSeq</span><br><span class="line">  println(seq)<span class="comment">//Range(1, 2, 3, 4, 5)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>获取长度及元素：</strong></p>
<p>通过 length 或 size 方法获取长度，通过索引直接获取元素。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> seq = (<span class="number">1</span> to <span class="number">5</span>).toSeq</span><br><span class="line">  println(seq.length)<span class="comment">//5</span></span><br><span class="line">  println(seq.size)<span class="comment">//5</span></span><br><span class="line">  println(seq(<span class="number">0</span>))<span class="comment">//1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>获取指定元素的索引值</strong></p>
<ul>
<li>indexOf 获取指定元素在列表中第一次出现的位置</li>
<li>lastIndexOf 获取指定元素在列表中最后一次出现的位置</li>
<li>indexWhere 获取满足条件的元素，在集合中第一次出现的索引</li>
<li>lastIndexWhere 获取满足条件的元素，在集合中最后一次出现的索引</li>
<li>indexOfSlice 获取指定的子序列在集合中第一次出现的位置</li>
</ul>
<p>找不到返回 -1。</p>
<hr>
<p><strong>判断是否包含指定数据：</strong></p>
<p>startsWith 是否以指定子序列开头</p>
<p>endsWith 是否以指定子序列结尾</p>
<p>contains 判断是否包含某个指定数据</p>
<p>containsSlice 判断是否包含某个指定子序列</p>
<hr>
<p><strong>修改指定的元素：</strong></p>
<p>updated 修改指定索引位置的元素为指定的值。</p>
<p>patch 修改指定区间的元素为指定的值。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> seq = (<span class="number">1</span> to <span class="number">5</span>).toSeq</span><br><span class="line">  <span class="keyword">val</span> seq1 = seq.updated(<span class="number">0</span>, <span class="number">5</span>)</span><br><span class="line">  println(seq1)<span class="comment">//Vector(5, 2, 3, 4, 5)</span></span><br><span class="line">  <span class="comment">//参数1 起始索引 参数2 替换后的元素 参数3 替换几个</span></span><br><span class="line">  <span class="keyword">val</span> seq2 = seq.patch(<span class="number">1</span>, <span class="type">Seq</span>(<span class="number">1</span>, <span class="number">2</span>), <span class="number">3</span>)</span><br><span class="line">  println(seq2)<span class="comment">//Vector(1, 1, 2, 4, 5)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Stack"><a href="#Stack" class="headerlink" title="Stack"></a>Stack</h3><p>top 获取栈顶元素</p>
<p>push 入栈</p>
<p>pop 出栈</p>
<p>clear 清除所有元素</p>
<p><code>mutable.Stack</code> 有一个独有方法 pushAll，把多个元素压入栈中。</p>
<p>ArrayStack 有独有方法为：dup，复制栈顶元素。preseving，执行表达式，执行完毕后恢复栈。</p>
<p>操作示例：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="comment">//从右往左入栈</span></span><br><span class="line">  <span class="keyword">val</span> s = mutable.<span class="type">Stack</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">  println(s.top)<span class="comment">//1</span></span><br><span class="line">  println(s.push(<span class="number">6</span>))<span class="comment">//Stack(6, 1, 2, 3, 4, 5)</span></span><br><span class="line">  println(s.pushAll(<span class="type">Seq</span>(<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)))<span class="comment">//Stack(9, 8, 7, 6, 1, 2, 3, 4, 5)</span></span><br><span class="line">  println(s.pop())<span class="comment">//9</span></span><br><span class="line">  println(s.clear())<span class="comment">//()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>定义可变栈存储1-5，通过dup方法复制栈顶元素，通过preseving 方法先清空元素再恢复。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="comment">//从右往左入栈</span></span><br><span class="line">  <span class="keyword">val</span> s = mutable.<span class="type">ArrayStack</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">  <span class="comment">//复制栈顶元素</span></span><br><span class="line">  s.dup()</span><br><span class="line">  println(s)<span class="comment">//ArrayStack(1, 1, 2, 3, 4, 5)</span></span><br><span class="line">  s.preserving(&#123;</span><br><span class="line">    <span class="comment">//该方法执行后，栈中数据会恢复</span></span><br><span class="line">    s.clear()</span><br><span class="line">  &#125;)</span><br><span class="line">  println(s)<span class="comment">//ArrayStack(1, 1, 2, 3, 4, 5)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Queue"><a href="#Queue" class="headerlink" title="Queue"></a>Queue</h3><p>表示队列，特点是 FIFO，常用的队列是 mutable.Queue，内部以 MutableList 实现。</p>
<p>enqueue 入队</p>
<p>dequeue 出队</p>
<p>dequeueAll 移除所有满足条件的元素</p>
<p>dequeueFirst 移除第一个满足条件的元素</p>
<hr>
<h3 id="案例：统计字符个数"><a href="#案例：统计字符个数" class="headerlink" title="案例：统计字符个数"></a>案例：统计字符个数</h3><p>提示用户录入字符串并接受，统计每个字符出现的次数并打印。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  println(<span class="string">"请输入一个字符串:"</span>)</span><br><span class="line">  <span class="keyword">val</span> str = <span class="type">StdIn</span>.readLine()</span><br><span class="line">  <span class="keyword">val</span> map = mutable.<span class="type">Map</span>[<span class="type">Char</span>, <span class="type">Int</span>]()</span><br><span class="line">  <span class="keyword">for</span>(c &lt;- str.toCharArray)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!map.contains(c))</span><br><span class="line">      map += c -&gt; <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      map += c -&gt; (map.getOrElse(c, <span class="number">1</span>) + <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  map.foreach(println(_))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Scala/" rel="tag"># Scala</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/04/19/Daily-word-4/" rel="next" title="Daily word 4">
                <i class="fa fa-chevron-left"></i> Daily word 4
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/04/20/1_Spring 入门实战笔记/" rel="prev" title="Spring入门实战笔记">
                Spring入门实战笔记 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a href="/">
            
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="stone">
            
          </a>
              <p class="site-author-name" itemprop="name">stone</p>
              <div class="site-description motion-element" itemprop="description">Hungry Fool</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">36</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">11</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      


      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">


            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#概述"><span class="nav-number">1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#基本语法"><span class="nav-number">2.</span> <span class="nav-text">基本语法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#输出和分号"><span class="nav-number">2.1.</span> <span class="nav-text">输出和分号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常量"><span class="nav-number">2.2.</span> <span class="nav-text">常量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#变量"><span class="nav-number">2.3.</span> <span class="nav-text">变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串"><span class="nav-number">2.4.</span> <span class="nav-text">字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#标识符"><span class="nav-number">2.5.</span> <span class="nav-text">标识符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据类型"><span class="nav-number">2.6.</span> <span class="nav-text">数据类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类型转换"><span class="nav-number">2.7.</span> <span class="nav-text">类型转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#键盘录入"><span class="nav-number">2.8.</span> <span class="nav-text">键盘录入</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#运算符"><span class="nav-number">3.</span> <span class="nav-text">运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#算数运算符"><span class="nav-number">3.1.</span> <span class="nav-text">算数运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#赋值运算符"><span class="nav-number">3.2.</span> <span class="nav-text">赋值运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关系运算符"><span class="nav-number">3.3.</span> <span class="nav-text">关系运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#逻辑运算符"><span class="nav-number">3.4.</span> <span class="nav-text">逻辑运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#位运算符"><span class="nav-number">3.5.</span> <span class="nav-text">位运算符</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#流程控制"><span class="nav-number">4.</span> <span class="nav-text">流程控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#顺序结构"><span class="nav-number">4.1.</span> <span class="nav-text">顺序结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#选择结构"><span class="nav-number">4.2.</span> <span class="nav-text">选择结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#循环结构"><span class="nav-number">4.3.</span> <span class="nav-text">循环结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#for-循环"><span class="nav-number">4.3.1.</span> <span class="nav-text">for 循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#while-循环"><span class="nav-number">4.3.2.</span> <span class="nav-text">while 循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#do-while-循环"><span class="nav-number">4.3.3.</span> <span class="nav-text">do-while 循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#break-和-continue"><span class="nav-number">4.3.4.</span> <span class="nav-text">break 和 continue</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#案例：打印九九乘法表"><span class="nav-number">4.4.</span> <span class="nav-text">案例：打印九九乘法表</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#方法和函数"><span class="nav-number">5.</span> <span class="nav-text">方法和函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#方法"><span class="nav-number">5.1.</span> <span class="nav-text">方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#返回值的类型推断"><span class="nav-number">5.1.1.</span> <span class="nav-text">返回值的类型推断</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#惰性方法"><span class="nav-number">5.1.2.</span> <span class="nav-text">惰性方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#方法参数"><span class="nav-number">5.1.3.</span> <span class="nav-text">方法参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#方法调用方式"><span class="nav-number">5.1.4.</span> <span class="nav-text">方法调用方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数"><span class="nav-number">5.2.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#定义"><span class="nav-number">5.2.1.</span> <span class="nav-text">定义</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#方法和函数的区别"><span class="nav-number">5.2.2.</span> <span class="nav-text">方法和函数的区别</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#案例：打印nn乘法表"><span class="nav-number">5.3.</span> <span class="nav-text">案例：打印nn乘法表</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类和对象"><span class="nav-number">6.</span> <span class="nav-text">类和对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#类和对象-1"><span class="nav-number">6.1.</span> <span class="nav-text">类和对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#成员变量"><span class="nav-number">6.2.</span> <span class="nav-text">成员变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用下划线初始化成员变量"><span class="nav-number">6.3.</span> <span class="nav-text">使用下划线初始化成员变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#定义和访问成员方法"><span class="nav-number">6.4.</span> <span class="nav-text">定义和访问成员方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#访问修饰符"><span class="nav-number">6.5.</span> <span class="nav-text">访问修饰符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#构造器"><span class="nav-number">6.6.</span> <span class="nav-text">构造器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#主构造器"><span class="nav-number">6.6.1.</span> <span class="nav-text">主构造器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#辅助构造器"><span class="nav-number">6.6.2.</span> <span class="nav-text">辅助构造器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#单例对象"><span class="nav-number">6.7.</span> <span class="nav-text">单例对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#main-方法"><span class="nav-number">6.8.</span> <span class="nav-text">main 方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#伴生对象"><span class="nav-number">6.9.</span> <span class="nav-text">伴生对象</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#apply-方法"><span class="nav-number">6.9.1.</span> <span class="nav-text">apply 方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#案例：定义工具类"><span class="nav-number">6.10.</span> <span class="nav-text">案例：定义工具类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#继承和抽象类"><span class="nav-number">7.</span> <span class="nav-text">继承和抽象类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#继承"><span class="nav-number">7.1.</span> <span class="nav-text">继承</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类型判断"><span class="nav-number">7.2.</span> <span class="nav-text">类型判断</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#抽象类"><span class="nav-number">7.3.</span> <span class="nav-text">抽象类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#匿名内部类"><span class="nav-number">7.4.</span> <span class="nav-text">匿名内部类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#案例：动物类"><span class="nav-number">7.5.</span> <span class="nav-text">案例：动物类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#特质"><span class="nav-number">8.</span> <span class="nav-text">特质</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#概述-1"><span class="nav-number">8.1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对象混入-trait"><span class="nav-number">8.2.</span> <span class="nav-text">对象混入 trait</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用-trait-实现适配器模式"><span class="nav-number">8.3.</span> <span class="nav-text">使用 trait 实现适配器模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用-trait-实现模板方法模式"><span class="nav-number">8.4.</span> <span class="nav-text">使用 trait 实现模板方法模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用-trait-实现责任链模式"><span class="nav-number">8.5.</span> <span class="nav-text">使用 trait 实现责任链模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#trait-构造机制"><span class="nav-number">8.6.</span> <span class="nav-text">trait 构造机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#trait-继承-class"><span class="nav-number">8.7.</span> <span class="nav-text">trait 继承 class</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#案例：程序员"><span class="nav-number">8.8.</span> <span class="nav-text">案例：程序员</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#包"><span class="nav-number">9.</span> <span class="nav-text">包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#包-1"><span class="nav-number">9.1.</span> <span class="nav-text">包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#样例类"><span class="nav-number">9.2.</span> <span class="nav-text">样例类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#样例对象"><span class="nav-number">9.3.</span> <span class="nav-text">样例对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#案例：计算器"><span class="nav-number">9.4.</span> <span class="nav-text">案例：计算器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据结构"><span class="nav-number">10.</span> <span class="nav-text">数据结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#数组"><span class="nav-number">10.1.</span> <span class="nav-text">数组</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#定长数组"><span class="nav-number">10.1.1.</span> <span class="nav-text">定长数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#变长数组"><span class="nav-number">10.1.2.</span> <span class="nav-text">变长数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#遍历数组"><span class="nav-number">10.1.3.</span> <span class="nav-text">遍历数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数组常用算法"><span class="nav-number">10.1.4.</span> <span class="nav-text">数组常用算法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#元组"><span class="nav-number">10.2.</span> <span class="nav-text">元组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#列表"><span class="nav-number">10.3.</span> <span class="nav-text">列表</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#不可变列表"><span class="nav-number">10.3.1.</span> <span class="nav-text">不可变列表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#可变列表"><span class="nav-number">10.3.2.</span> <span class="nav-text">可变列表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#列表常用操作"><span class="nav-number">10.3.3.</span> <span class="nav-text">列表常用操作</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#集"><span class="nav-number">10.4.</span> <span class="nav-text">集</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#不可变集"><span class="nav-number">10.4.1.</span> <span class="nav-text">不可变集</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#可变集"><span class="nav-number">10.4.2.</span> <span class="nav-text">可变集</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#映射"><span class="nav-number">10.5.</span> <span class="nav-text">映射</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#不可变-Map"><span class="nav-number">10.5.1.</span> <span class="nav-text">不可变 Map</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#可变-Map"><span class="nav-number">10.5.2.</span> <span class="nav-text">可变 Map</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#迭代器"><span class="nav-number">10.6.</span> <span class="nav-text">迭代器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数式编程"><span class="nav-number">10.7.</span> <span class="nav-text">函数式编程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#foreach"><span class="nav-number">10.7.1.</span> <span class="nav-text">foreach</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#map"><span class="nav-number">10.7.2.</span> <span class="nav-text">map</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#flatMap"><span class="nav-number">10.7.3.</span> <span class="nav-text">flatMap</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#filter"><span class="nav-number">10.7.4.</span> <span class="nav-text">filter</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#排序"><span class="nav-number">10.7.5.</span> <span class="nav-text">排序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#group-by"><span class="nav-number">10.7.6.</span> <span class="nav-text">group by</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#reduce-和-fold"><span class="nav-number">10.7.7.</span> <span class="nav-text">reduce 和 fold</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#案例：学生成绩单"><span class="nav-number">10.8.</span> <span class="nav-text">案例：学生成绩单</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#模式匹配、偏函数、异常、提取器"><span class="nav-number">11.</span> <span class="nav-text">模式匹配、偏函数、异常、提取器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#模式匹配"><span class="nav-number">11.1.</span> <span class="nav-text">模式匹配</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#简单模式匹配"><span class="nav-number">11.1.1.</span> <span class="nav-text">简单模式匹配</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#匹配类型"><span class="nav-number">11.1.2.</span> <span class="nav-text">匹配类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#守卫"><span class="nav-number">11.1.3.</span> <span class="nav-text">守卫</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#匹配样例类"><span class="nav-number">11.1.4.</span> <span class="nav-text">匹配样例类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#匹配集合"><span class="nav-number">11.1.5.</span> <span class="nav-text">匹配集合</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#变量声明中的模式匹配"><span class="nav-number">11.1.6.</span> <span class="nav-text">变量声明中的模式匹配</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#匹配-for-表达式"><span class="nav-number">11.1.7.</span> <span class="nav-text">匹配 for 表达式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Option-类型"><span class="nav-number">11.2.</span> <span class="nav-text">Option 类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#偏函数"><span class="nav-number">11.3.</span> <span class="nav-text">偏函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#正则表达式"><span class="nav-number">11.4.</span> <span class="nav-text">正则表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#异常处理"><span class="nav-number">11.5.</span> <span class="nav-text">异常处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#提取器"><span class="nav-number">11.6.</span> <span class="nav-text">提取器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#案例：随机职业"><span class="nav-number">11.7.</span> <span class="nav-text">案例：随机职业</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据的读写"><span class="nav-number">12.</span> <span class="nav-text">数据的读写</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#读取数据"><span class="nav-number">12.1.</span> <span class="nav-text">读取数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#按行读取"><span class="nav-number">12.1.1.</span> <span class="nav-text">按行读取</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#按字符读取"><span class="nav-number">12.1.2.</span> <span class="nav-text">按字符读取</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#读取词法单元和数字"><span class="nav-number">12.1.3.</span> <span class="nav-text">读取词法单元和数字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#从-URL-或其他源读取"><span class="nav-number">12.1.4.</span> <span class="nav-text">从 URL 或其他源读取</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#写入数据"><span class="nav-number">12.2.</span> <span class="nav-text">写入数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#往文件中写入指定内容"><span class="nav-number">12.2.1.</span> <span class="nav-text">往文件中写入指定内容</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#序列化和反序列化"><span class="nav-number">12.2.2.</span> <span class="nav-text">序列化和反序列化</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#案例：学员成绩表"><span class="nav-number">12.3.</span> <span class="nav-text">案例：学员成绩表</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#高阶函数"><span class="nav-number">13.</span> <span class="nav-text">高阶函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#作为值的函数"><span class="nav-number">13.1.</span> <span class="nav-text">作为值的函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#匿名函数"><span class="nav-number">13.2.</span> <span class="nav-text">匿名函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#柯里化"><span class="nav-number">13.3.</span> <span class="nav-text">柯里化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#闭包"><span class="nav-number">13.4.</span> <span class="nav-text">闭包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#控制抽象"><span class="nav-number">13.5.</span> <span class="nav-text">控制抽象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#案例：计算器-1"><span class="nav-number">13.6.</span> <span class="nav-text">案例：计算器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#隐式转换和隐式参数"><span class="nav-number">14.</span> <span class="nav-text">隐式转换和隐式参数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#隐式转换"><span class="nav-number">14.1.</span> <span class="nav-text">隐式转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#隐式参数"><span class="nav-number">14.2.</span> <span class="nav-text">隐式参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#案例：获取列表元素平均值"><span class="nav-number">14.3.</span> <span class="nav-text">案例：获取列表元素平均值</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#递归"><span class="nav-number">15.</span> <span class="nav-text">递归</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#内存图解"><span class="nav-number">15.1.</span> <span class="nav-text">内存图解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#斐波那契数列"><span class="nav-number">15.2.</span> <span class="nav-text">斐波那契数列</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#案例：打印目录文件"><span class="nav-number">15.3.</span> <span class="nav-text">案例：打印目录文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#泛型"><span class="nav-number">16.</span> <span class="nav-text">泛型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#泛型-1"><span class="nav-number">16.1.</span> <span class="nav-text">泛型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#上下界"><span class="nav-number">16.2.</span> <span class="nav-text">上下界</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#协变、逆变、非变"><span class="nav-number">16.3.</span> <span class="nav-text">协变、逆变、非变</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#集合"><span class="nav-number">17.</span> <span class="nav-text">集合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Traverable"><span class="nav-number">17.1.</span> <span class="nav-text">Traverable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#案例：随机学生序列"><span class="nav-number">17.2.</span> <span class="nav-text">案例：随机学生序列</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Iterable"><span class="nav-number">17.3.</span> <span class="nav-text">Iterable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Seq"><span class="nav-number">17.4.</span> <span class="nav-text">Seq</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Stack"><span class="nav-number">17.5.</span> <span class="nav-text">Stack</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Queue"><span class="nav-number">17.6.</span> <span class="nav-text">Queue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#案例：统计字符个数"><span class="nav-number">17.7.</span> <span class="nav-text">案例：统计字符个数</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">stone</span>

  

  
</div>









        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="Total Visitors">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="Total Views">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/affix.js?v=7.1.0"></script>

  <script src="/js/schemes/pisces.js?v=7.1.0"></script>



  
  <script src="/js/scrollspy.js?v=7.1.0"></script>
<script src="/js/post-details.js?v=7.1.0"></script>



  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  

  
  

<script src="//cdn1.lncld.net/static/js/3.11.1/av-min.js"></script>



<script src="//unpkg.com/valine/dist/Valine.min.js"></script>

<script>
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: 'BfQW4FLTza3lJnrgwNX9oCW1-gzGzoHsz',
    appKey: '0L4jcEeI7bk5hnenGxU9XGk2',
    placeholder: 'Just go go',
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false,
    lang: '' || 'zh-cn'
  });
</script>




  


  




  

  

  
  

  
  

  
    
      <script type="text/x-mathjax-config">
  

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });
  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') { next = next.nextSibling }
        if (next && next.nodeName.toLowerCase() === 'br') { next.parentNode.removeChild(next) }
      }
    });
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      document.getElementById(all[i].inputID + '-Frame').parentNode.className += ' has-jax';
    }
  });
</script>
<script src="//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  


  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
<!-- 页面点击核心价值观 -->
<script type="text/javascript" src="/js/src/clickfuqiang.js"></script>
<!-- 点击爆炸 -->

<!-- 音频播放 -->
<link rel="stylesheet" href="/js/src/APlayer.min.css">
  <div id="player" class="aplayer aplayer-withlist aplayer-fixed" data-id="3148759183" data-server="netease" data-type="playlist" data-order="random" data-fixed="true" data-listfolded="true" data-theme="#2D8CF0"></div>
  <script src="/js/src/APlayer.min.js"></script>
  <script src="/js/src/music.js"></script>
<script>
$(".aplayer-play").click()   // 如果想让歌曲在页面加载完播放可以设置
</script>

<!-- 猫 -->
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/2662419405/CDN/pio.css">
<script src="https://cdn.jsdelivr.net/gh/2662419405/CDN/l2dPlus.js"></script>
<script src="https://cdn.jsdelivr.net/gh/2662419405/CDN/pioPlus.js"></script>
<script src="https://cdn.jsdelivr.net/gh/2662419405/CDN/mao.js"></script>

<!-- mouse-click -->
<script src="/js/src/mouseclick.js" type="text/javascript"></script>
<!-- mouse-follow -->
<span class="js-cursor-container"></span>
<script src="/js/src/mousefollow.js" type="text/javascript"></script>